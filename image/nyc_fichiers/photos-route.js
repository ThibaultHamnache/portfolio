webpackJsonp([1],{1402:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1873);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1414:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1434);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1415:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t={children:a.PropTypes.node,delay:a.PropTypes.number,wrapperClassName:a.PropTypes.string,targetWrapperClassName:a.PropTypes.string,mode:a.PropTypes.oneOf(["mount","visibility"]),onExit:a.PropTypes.func},o={mode:"mount"},n=function(o){function n(){var e=o.call(this)||this;return e.handleMouseMove=e.handleMouseMove.bind(e),e.handleMouseLeave=e.handleMouseLeave.bind(e),e.state={isHovering:!1},e}return d(n,o),n.prototype.shouldComponentUpdate=function(e,t){var o=!(0,l.default)(this.props,e),n=this.state.isHovering!==t.isHovering;return o||n},n.prototype.handleMouseMove=function(){var e=this;this.state.isHovering||this.hoverTimerId||(this.hoverTimerId=window.setTimeout(function(){e.hoverTimerId=null,e.setState({isHovering:!0})},this.props.delay))},n.prototype.handleMouseLeave=function(){this.hoverTimerId&&(window.clearTimeout(this.hoverTimerId),this.hoverTimerId=null),this.setState({isHovering:!1},this.props.onExit)},n.prototype.renderHoverContents=function(){var o=this.state.isHovering,n=this.props,r=n.mode,a=n.targetWrapperClassName,u=(0,c.default)(this.props,Object.keys(t));return"visibility"===r?i.default.createElement("span",{className:a,style:{visibility:o?"visible":"hidden"}},i.default.createElement(e,f({},u))):o?i.default.createElement(e,f({},u)):null},n.prototype.render=function(){var e=this.props,t=e.children,o=e.wrapperClassName;return i.default.createElement("span",{className:o,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave},this.renderHoverContents(),t)},n}(a.Component);return n.displayName="WrappedHoverComponent",n.propTypes=t,n.defaultProps=o,n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=o(1),i=n(a),u=o(502),l=n(u),s=o(142),c=n(s),d=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),f=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}},1420:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1421);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1421:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FollowButton=void 0;var r=o(1),a=n(r),i=o(9),u=o(42),l=n(u),s=o(10),c=n(s),d=o(18);o(490),o(491),o(492);var f=o(59),p=n(f),h=o(21),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(h),y=o(47),v=o(53),_=n(v),b=o(29),g=n(b),P=o(1422),T=n(P),w=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),S=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},O={selectedUser:r.PropTypes.object.isRequired,authUser:r.PropTypes.object,location:r.PropTypes.object,className:r.PropTypes.string,redirectAfterFollow:r.PropTypes.bool,trackFollowButtonClick:r.PropTypes.func.isRequired,trackUnfollowButtonClick:r.PropTypes.func.isRequired,followUser:r.PropTypes.func.isRequired,unfollowUser:r.PropTypes.func.isRequired,labelText:r.PropTypes.shape({isFollowing:r.PropTypes.string.isRequired,isNotFollowing:r.PropTypes.string.isRequired}),buttonType:r.PropTypes.string},I={labelText:{isFollowing:"Following",isNotFollowing:"Follow"}},C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t.prototype.componentWillUnmount=function(){this.followSubscription&&this.followSubscription.unsubscribe()},t.prototype.getLabelText=function(){var e=this.props.labelText;return this.props.selectedUser.followed_by_user?e.isFollowing:e.isNotFollowing},t.prototype.buildToLink=function(){var e=this.props,t=e.authUser,o=e.location,n=t?o.query:Object.assign({},o.query,{login_view:"is_visible",login_action:"follow"});return{pathname:o.pathname,query:n,state:o.state}},t.prototype.buildClickHandler=function(){var e=this,t=this.props,o=t.authUser,n=t.selectedUser,r=t.followUser,a=t.unfollowUser,i=t.trackFollowButtonClick,u=t.trackUnfollowButtonClick,l=t.buttonType;if(!o)return function(){return i(n.id,l)};var s=n.username,c=n.followed_by_user,f=c?p.default.custom.unfollowUser:p.default.custom.followUser,h=d.Observable.defer(function(){return f(s)}).retry(3).take(1);return function(t){t.stopPropagation(),c?(a(n.id),u(n.id,l)):(r(n.id),i(n.id,l)),e.followSubscription=h.subscribe()}},t.prototype.renderContainer=function(e){var t=this.props,o=t.selectedUser,n=t.className,r=t.redirectAfterFollow,i=t.authUser,u=this.buildClickHandler(),l=o.followed_by_user,s=!i,d=r||s,f={className:(0,c.default)(T.default.followButton,l&&T.default.isFollowing,n),buttonSize:"small"};return d?a.default.createElement(_.default,S({tag:"link",to:this.buildToLink(),onMouseUp:u},f),e):a.default.createElement(_.default,S({tag:"button",onMouseUp:u},f),e)},t.prototype.render=function(){var e=this.props,t=e.selectedUser,o=e.authUser;return(0,l.default)(o,"username")===t.username?a.default.createElement("div",null):this.renderContainer(a.default.createElement("span",null,a.default.createElement(g.default,{type:"follow",className:T.default.followIcon}),this.getLabelText()))},t}(r.Component);t.FollowButton=C,C.displayName="FollowButton",C.propTypes=O,C.defaultProps=I;var E=function(e){return{authUser:(0,y.getAuthUser)(e)}},k={trackFollowButtonClick:m.trackFollowButtonClick,trackUnfollowButtonClick:m.trackUnfollowButtonClick,followUser:m.followUser,unfollowUser:m.unfollowUser};t.default=(0,i.connect)(E,k)(C)},1422:function(e,t){e.exports={colorWhite:"#fff",colorLightGrey:"#ddd",colorGrey:"#999",colorDarkGrey:"#777",colorBlue:"#007fff",colorDarkBlue:"#006aff",colorBlack:"#000",followButton:"_3nDcb",isFollowing:"_2br-F",followIcon:"_2BKrY"}},1423:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1444);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1424:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1446);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1425:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1448);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1426:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SEARCH_DELAY=600,t.SEARCH_TRACKING_DELAY=2500,t.CARD_HOVER_DELAY=500},1427:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1428);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1428:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UserResultCard=void 0;var r=o(1),a=n(r),i=o(9),u=o(10),l=n(u),s=o(42),c=n(s),d=o(58),f=n(d),p=o(47),h=o(41),m=o(12),y=o(60),v=o(1420),_=n(v),b=o(1429),g=n(b),P=o(189),T=n(P),w=o(1432),S=n(w),O={children:r.PropTypes.element,user:r.PropTypes.object.isRequired,photos:r.PropTypes.array,authUser:r.PropTypes.object,withinContainer:r.PropTypes.bool,withFollowButton:r.PropTypes.bool},I=t.UserResultCard=function(e){var t=e.user,o=e.photos,n=e.authUser,r=e.withinContainer,i=e.withFollowButton,u=e.children,s=!!t.total_photos,d=s&&(0,y.range)(3).map(function(e){return a.default.createElement(g.default,{key:e,photo:(0,c.default)(o,e)})}),p=i&&n&&n.id!==t.id;return a.default.createElement("div",{className:(0,l.default)(S.default.cardLink,r&&S.default.withinContainer)},a.default.createElement(f.default,{className:S.default.container,to:{pathname:(0,h.buildUserUrl)(t)},onClick:function(){return window.scrollTo(0,0)}},a.default.createElement("div",{className:S.default.topContainer},a.default.createElement("div",{className:S.default.userAvatarContainer},a.default.createElement(T.default,{className:S.default.avatar,user:t,avatarSize:P.AvatarSize.medium,disableLink:!0})),a.default.createElement("div",{className:S.default.userInfoContainer},a.default.createElement("h1",{className:S.default.userName},t.name),a.default.createElement("p",{className:S.default.userHandle},"@"+t.username))),s&&a.default.createElement("div",{className:S.default.bottomContainer},d)),p&&a.default.createElement("div",{className:S.default.followButtonContainer},a.default.createElement(_.default,{selectedUser:t,className:S.default.followButton})),u)};I.displayName="UserResultCard",I.propTypes=O;var C=function(e,t){return{authUser:(0,p.getAuthUser)(e),photos:(0,y.pickValues)((0,m.getPhotosById)(e),t.user.photoIds)||t.user.photos}};t.default=(0,i.connect)(C)(I)},1429:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1430);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1430:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),a=n(r),i=o(42),u=n(i),l=o(10),s=n(l),c=o(20),d=o(1431),f=n(d),p={photo:r.PropTypes.object,darker:r.PropTypes.bool.isRequired},h={darker:!1},m=function(e){var t=e.photo,o=e.darker,n=(0,u.default)(t,"urls.thumb"),r=(0,u.default)(t,"color");return a.default.createElement("div",{className:(0,s.default)(f.default.photoThumbContainer,o?f.default.photoThumbContainerDark:f.default.photoThumbContainerLight),style:t&&{backgroundColor:r}},a.default.createElement("div",{className:f.default.photoThumb,style:t&&{backgroundImage:(0,c.urlToBackgroundImage)(n)}}))};m.propTypes=p,m.defaultProps=h,t.default=m},1431:function(e,t){e.exports={colors:'"styles/Colors.css"',colorDarkWhite:"#f5f5f5",colorLightGrey:"#ddd",photoThumbContainer:"_1BiZr",photoThumbContainerLight:"_1QflV",photoThumbContainerDark:"_3mBAu",photoThumb:"_2te-4"}},1432:function(e,t){e.exports={clearfix:"_2TNYr","sm-col":"_6_Gu-","sm-col-6":"_2cVF0","md-col-4":"_1hITE",px2:"_2DKvn",floatLeft:"_2T3hc","--sm-min":"(--sm-min)",colorDarkWhite:"#f5f5f5",colorLightGrey:"#ddd",colorGrey:"#999",colorLightBlack:"#111",truncate:"_1ByhS",textDecorationNone:"_1CBrG",spacingBase:"16px",avatarSize:"64px",grid:"_15FGY _6_Gu- _2cVF0 _1hITE _2DKvn",cardLink:"_3x_oL",withinContainer:"_3eFB8",container:"_2Twi2 _1CBrG",topContainer:"_2Em44 _2TNYr",userAvatarContainer:"_6jh8j _2T3hc",avatar:"_2ogcu",userInfoContainer:"_3_xrB",userName:"_2_qf1 _1ByhS",userHandle:"_1l0oJ _1ByhS",bottomContainer:"_1dc02",followButtonContainer:"_3u1LW",followButton:"_1TZOC"}},1433:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1435);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1434:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),a=n(r),i=o(10),u=n(i),l=o(58),s=n(l),c=o(279),d=o(41),f=o(1415),p=n(f),h=o(1426),m=o(189),y=n(m),v=o(1433),_=n(v),b=o(1437),g=n(b),P={user:r.PropTypes.object.isRequired,type:r.PropTypes.oneOf(["default","alt","emphasiseUsername"]),secondaryLink:r.PropTypes.shape({label:r.PropTypes.string.isRequired,href:r.PropTypes.string.isRequired}),includeAvatar:r.PropTypes.bool,inline:r.PropTypes.bool,isInFollowingFeed:r.PropTypes.bool,children:r.PropTypes.node},T={type:"default",includeAvatar:!1},w=(0,p.default)(_.default),S=function(e){var t=e.user,o=e.type,n=e.secondaryLink,r=e.children,i=e.includeAvatar,l=e.inline,c=e.isInFollowingFeed,f=function(){switch(o){case"default":return[];case"alt":return[g.default.alt];case"emphasiseUsername":return[g.default.mainLinkEmphasiseUsernameType,g.default.linkEmphasiseUsernameType]}}(),p=function(){switch(o){case"alt":return g.default.alt;case"emphasiseUsername":return g.default.linkEmphasiseUsernameType}}();return a.default.createElement("span",{className:g.default.container},i&&a.default.createElement(w,{user:t,delay:h.CARD_HOVER_DELAY,wrapperClassName:g.default.avatarContainer},a.default.createElement(y.default,{user:t,className:g.default.avatar})),a.default.createElement("div",{className:(0,u.default)(g.default.linkContainer,l&&g.default.inlineContainer,c&&g.default.feedContainer)},a.default.createElement(w,{user:t,delay:h.CARD_HOVER_DELAY},a.default.createElement(s.default,{to:{pathname:(0,d.buildUserUrl)(t)},className:(0,u.default)(g.default.name,f,(m={},m[g.default.centerName]=!n,m[g.default.inlineLink]=l,m))},r||t.name),n?a.default.createElement("a",{href:n.href,className:(0,u.default)(g.default.name,p,(v={},v[g.default.secondaryLink]=n,v))},n.label):null)));var m,v};S.propTypes=P,t.default=(0,c.withDefaults)(S,T)},1435:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),a=n(r),i=o(9),u=o(59),l=n(u),s=o(61),c=o(97),d=o(21),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(d),p=o(47),h=o(20),m=o(495),y=n(m),v=o(1427),_=n(v),b=o(1436),g=n(b),P=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),T={user:r.PropTypes.object.isRequired,authUser:r.PropTypes.object,updateData:r.PropTypes.func.isRequired},w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return P(t,e),t.prototype.render=function(){var e=this.props,t=e.user,o=e.updateData,n=e.authUser;return(0,h.checkUserIsEnhanced)({user:t,authUser:n})?a.default.createElement(y.default,{className:g.default.cardTooltip},a.default.createElement(_.default,{withinContainer:!0,withFollowButton:!0,user:t,actions:f})):(l.default.users.profile(t.username).then(s.handleApiFetchResponse).then((0,c.normalizeResponse)("user")).then(function(e){var t=e.entities;o(t)}),null)},t}(r.Component);w.displayName="UserDetailsCard",w.propTypes=T;var S=function(e){return{authUser:(0,p.getAuthUser)(e)}};t.default=(0,i.connect)(S,{updateData:f.updateData})(w)},1436:function(e,t){e.exports={cardTooltip:"wVee7"}},1437:function(e,t){e.exports={hoverTransition:"_3XJBh",colorWhite:"#fff",truncate:"_1ByhS",textDecorationNone:"_1CBrG",container:"_2aPXR",avatarContainer:"JRtMq",avatar:"qNcZ0",linkContainer:"_80uCh",name:"_3XzpS _1ByhS",centerName:"_2zITg",secondaryLink:"NRFpG _1ByhS",alt:"_1_w0v _3XJBh _1CBrG",mainLinkEmphasiseUsernameType:"_1O9Y0",linkEmphasiseUsernameType:"_3l__V _1CBrG",inlineContainer:"_3qohC",inlineLink:"_1ZT8D",feedContainer:"_3n7HL"}},1438:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.reportPhotoImpressions=void 0;var r=o(1),a=n(r),i=o(9),u=o(1461),l=n(u),s=o(98),c=n(s),d=o(20),f=o(21),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(f),h=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),m=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},y=!0===c.default.get("ENABLE_PHOTO_IMPRESSIONS_TRACKING");t.reportPhotoImpressions=function(e){var t=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return h(o,t),o.prototype.reportImpression=function(e){if(e){var t=this.props,o=t.photo,n=t.position;(0,t.reportPhotoImpression)({photo:{id:o.id,position:n}})}},o.prototype.render=function(){var t=a.default.createElement(e,m({},this.props));return y&&d.isBrowser&&(0,d.checkSupportsIntersectionObservers)()?a.default.createElement(l.default,{onChange:this.reportImpression.bind(this),threshold:.5},t):t},o.displayName="WrappedReportPhotoImpressionsComponent",o}(r.Component),o={reportPhotoImpression:p.reportPhotoImpression};return(0,i.connect)(null,o)(t)}},1441:function(e,t,o){"use strict";function n(e){var t=e.downloadButtonXp,o=e.inFollowingFeed;return[i.VARIANTS.showArrow,i.VARIANTS.showBottomBar].includes(t)&&!o}function r(e){var t=l.safeLocalStorageHelpers.hasItem(u.HAS_DOWNLOADED_A_PHOTO),o=e.downloadButtonXp===i.VARIANTS.showArrow;return n(e)&&o&&!t}function a(e){var t=e.downloadButtonXp,o=e.inFollowingFeed;return t===i.VARIANTS.showWord&&!o}Object.defineProperty(t,"__esModule",{value:!0}),t.checkHasWorkingHover=t.ActionsModes=t.ActionsStates=void 0,t.checkShouldShowDownloadButton=n,t.checkShouldShowTooltip=r,t.checkShouldShowLabel=a;var i=o(494),u=o(493),l=o(20),s=t.ActionsStates=void 0;!function(e){e.All="All",e.AddToCollectionButton="AddToCollectionButton",e.AddToCollectionButtonAndPhotographerInfo="AddToCollectionButtonAndPhotographerInfo",e.DownloadButton="DownloadButton"}(t.ActionsStates=s=s||(t.ActionsStates=s={}));var c=t.ActionsModes=void 0;!function(e){e.All="All",e.CollectionsOnboarding="CollectionsOnboarding"}(t.ActionsModes=c=c||(t.ActionsModes=c={}));var d=function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream};t.checkHasWorkingHover=function(){return!d()}},1442:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1443);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1443:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SmallPhoto=void 0;var r=o(1),a=n(r),i=o(9),u=o(10),l=n(u),s=o(58),c=n(s),d=o(143),f=n(d),p=o(20),h=o(190),m=o(41),y=o(282),v=o(96),_=o(141),b=o(279),g=o(1414),P=n(g),T=o(1423),w=n(T),S=o(1424),O=n(S),I=o(1425),C=n(I),E=o(1451),k=n(E),M=o(1441),R=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),N={inFollowingFeed:!1,shouldIncludeLink:!0,actionsMode:M.ActionsModes.All},D=function(e){function t(t){var o=e.call(this,t)||this;return o.handleMouseMove=o.handleMouseMove.bind(o),o.handleMouseLeave=o.handleMouseLeave.bind(o),o.state={isHovering:!1},o}return R(t,e),t.prototype.getActionsState=function(){var e=this.state.isHovering,t=this.props,o=t.actionsMode,n=t.jsLoaded,r=t.downloadButtonXp,a=t.inFollowingFeed,i=(0,M.checkShouldShowDownloadButton)({downloadButtonXp:r,inFollowingFeed:a});switch(o){case M.ActionsModes.CollectionsOnboarding:return e||!n?M.ActionsStates.AddToCollectionButtonAndPhotographerInfo:M.ActionsStates.AddToCollectionButton;case M.ActionsModes.All:return e||!n?M.ActionsStates.All:i&&!e?M.ActionsStates.DownloadButton:void 0}},t.prototype.handleMouseMove=function(){(0,M.checkHasWorkingHover)()&&!this.state.isHovering&&this.setState({isHovering:!0})},t.prototype.handleMouseLeave=function(){this.setState({isHovering:!1})},t.prototype.renderPhotoInfo=function(){var e=this.props,t=e.photo,o=e.linkTo,n=e.windowWidth,r=e.location,i=e.imageUrl,u=e.showPhotoInfoOnHover,s=e.shouldIncludeLink,d=!(0,h.checkIsPhone)(n);return a.default.createElement("div",{className:(0,l.default)(k.default.photoInfo,void 0!==this.getActionsState()&&k.default.photoInfoIsShown),onMouseMove:d?this.handleMouseMove:void 0,onMouseLeave:d?this.handleMouseLeave:void 0},s&&a.default.createElement(c.default,{title:"View the photo by "+t.user.name,to:o||(0,m.buildPhotoLink)(t,r,n,{initialSrc:i}),className:k.default.photoInfoLink}),u&&this.renderActions())},t.prototype.renderLikeButton=function(){var e=this.props,t=e.location,o=e.photo;return a.default.createElement(w.default,{type:"alt",location:t,photo:o})},t.prototype.renderAddToCollectionButton=function(){var e=this.props,t=e.location,o=e.photo;return a.default.createElement("div",{className:k.default.addToCollectionButtonContainer},a.default.createElement(C.default,{className:k.default.collectionButton,type:"alt",photo:o,location:t}))},t.prototype.renderDownloadButton=function(){var e=this.props,t=e.photo,o=e.downloadButtonXp,n=e.inFollowingFeed,r=(0,M.checkShouldShowTooltip)({downloadButtonXp:o,inFollowingFeed:n}),i=(0,M.checkShouldShowLabel)({downloadButtonXp:o,inFollowingFeed:n});return a.default.createElement("div",{className:k.default.buttonDownloadContainer},a.default.createElement(O.default,{type:"alt",photo:t,showLabel:i,showTooltip:r}))},t.prototype.renderUserLink=function(){var e=this.props.photo.user;return a.default.createElement("div",{className:k.default.userContainer},a.default.createElement(P.default,{includeAvatar:!0,user:e,type:"alt"}))},t.prototype.renderTopActions=function(){switch(this.getActionsState()){case M.ActionsStates.AddToCollectionButton:case M.ActionsStates.AddToCollectionButtonAndPhotographerInfo:return a.default.createElement("div",{className:k.default.actionsTop},this.renderAddToCollectionButton());case M.ActionsStates.All:return a.default.createElement("div",{className:k.default.actionsTop},this.renderLikeButton(),this.renderAddToCollectionButton());case M.ActionsStates.DownloadButton:case void 0:return}},t.prototype.renderBottomActions=function(){switch(this.getActionsState()){case M.ActionsStates.All:return a.default.createElement("div",{className:k.default.actionsBottom},this.renderUserLink(),this.renderDownloadButton());case M.ActionsStates.AddToCollectionButtonAndPhotographerInfo:return a.default.createElement("div",{className:k.default.actionsBottom},this.renderUserLink());case M.ActionsStates.DownloadButton:return a.default.createElement("div",{className:k.default.actionsBottom},this.renderDownloadButton());case M.ActionsStates.AddToCollectionButton:case void 0:return}},t.prototype.renderActions=function(){return void 0!==this.getActionsState()?a.default.createElement("div",null,this.renderTopActions(),this.renderBottomActions()):null},t.prototype.renderImage=function(){var e=this,t=this.props,o=t.photo,n=t.width,r=t.height,i=t.imageUrl,u=t.fillWidth,s=t.children,c=t.followingFeedClassName,d=t.inFollowingFeed,h=t.photoRef,m={backgroundImage:(0,p.urlToBackgroundImage)(i),backgroundColor:o.color,backgroundSize:"cover",width:u?"100%":n,height:r};return a.default.createElement("div",{style:d?m:{},className:(0,l.default)(d&&(0,l.default)(k.default.photo,c))},!d&&a.default.createElement("img",{alt:o.description||void 0,src:i,ref:function(t){(0,f.default)(h)&&h(t),e.linkElem=t},className:k.default.imgPhoto,style:{width:u?"100%":n,height:r}}),s)},t.prototype.render=function(){var e=this.props.containerClassName;return a.default.createElement("div",{className:(0,l.default)(k.default.container,e)},this.renderImage(),this.renderPhotoInfo())},t.displayName="SmallPhoto",t}(r.PureComponent);t.SmallPhoto=D;var A=function(e,t){return{jsLoaded:(0,y.getJsLoaded)(e),windowWidth:(0,v.getWindowWidth)(e),downloadButtonXp:(0,_.getDownloadButtonXp)(e)}};t.default=(0,b.withDefaults)((0,i.connect)(A)(D),N)},1444:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LikeButton=void 0;var r=o(1),a=n(r),i=o(9),u=o(10),l=n(u),s=o(47),c=o(21),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(c),f=o(18);o(490),o(491),o(492);var p=o(59),h=n(p),m=o(53),y=n(m),v=o(29),_=n(v),b=o(1445),g=n(b),P=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),T={type:r.PropTypes.oneOf(["default","alt"]),photo:r.PropTypes.object.isRequired,location:r.PropTypes.object.isRequired,className:r.PropTypes.string,authUser:r.PropTypes.object,trackPhotoUnlike:r.PropTypes.func.isRequired,trackPhotoLike:r.PropTypes.func.isRequired,unlikePhoto:r.PropTypes.func.isRequired,likePhoto:r.PropTypes.func.isRequired,setSelectedPhoto:r.PropTypes.func.isRequired},w={type:"default"},S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return P(t,e),t.prototype.componentWillUnmount=function(){this.likesSubscription&&this.likesSubscription.unsubscribe()},t.prototype.buildToLink=function(){var e=this.props,t=e.authUser,o=e.location,n=e.photo;return t?{pathname:o.pathname,query:o.query,state:o.state}:{pathname:o.pathname,query:Object.assign({},o.query,{login_view:"is_visible",login_action:"like",login_from_photo:n.id}),state:o.state}},t.prototype.isLikedModifier=function(){var e=this.props,t=e.photo,o=e.type,n="default"===o?"outline":"outline-alt";return t.liked_by_user?"pink":n},t.prototype.buildClickHandler=function(){var e=this,t=this.props,o=t.photo,n=t.trackPhotoUnlike,r=t.trackPhotoLike,a=t.unlikePhoto,i=t.likePhoto,u=o.liked_by_user,l=u?h.default.photos.unlikePhoto:h.default.photos.likePhoto,s=u?n:r,c=u?a:i,d=f.Observable.defer(function(){return l(o.id)}).retry(3);return function(t){t.preventDefault(),c(o.id),s(o),e.likesSubscription=d.subscribe()}},t.prototype.renderLikesLabel=function(){var e=this.props.photo;return e.likes?a.default.createElement("span",{className:g.default.labelLike},e.likes):a.default.createElement("span",null)},t.prototype.render=function(){var e=this.props,t=e.photo,o=e.setSelectedPhoto,n=e.trackPhotoLike,r=e.className,i=e.authUser,u=i?this.buildClickHandler():function(){o({id:t.id}),n(t)};return a.default.createElement(y.default,{className:(0,l.default)(g.default.buttonLike,r),buttonType:this.isLikedModifier(),tag:"link",title:"Like photo",buttonSize:"small",to:this.buildToLink(),onClick:u},a.default.createElement("span",null,a.default.createElement(_.default,{type:"heart",className:(0,l.default)(g.default.likeIcon,(s={},s[g.default.likeIconLiked]=t.liked_by_user,s))}),this.renderLikesLabel()));var s},t}(r.Component);t.LikeButton=S,S.displayName="LikeButton",S.propTypes=T,S.defaultProps=w;var O=function(e){return{authUser:(0,s.getAuthUser)(e)}},I={trackPhotoUnlike:d.trackPhotoUnlike,trackPhotoLike:d.trackPhotoLike,unlikePhoto:d.unlikePhoto,likePhoto:d.likePhoto,setSelectedPhoto:d.setSelectedPhoto};t.default=(0,i.connect)(O,I)(S)},1445:function(e,t){e.exports={floatLeft:"_2T3hc",colorPink:"#f15151",colorWhite:"#fff",likeIcon:"BWSrD _2T3hc",likeIconLiked:"_1O_YD",labelLike:"_2ER2Y _2T3hc"}},1446:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadButton=void 0;var r=o(1),a=n(r),i=o(9),u=o(10),l=n(u),s=o(21),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(s),d=o(281),f=o(493),p=o(20),h=o(1415),m=n(h),y=o(53),v=n(y),_=o(29),b=n(_),g=o(495),P=n(g),T=o(1447),w=n(T),S={photo:r.PropTypes.object.isRequired,type:r.PropTypes.oneOf(["default","alt","green"]),showLabel:r.PropTypes.bool,showTooltip:r.PropTypes.bool,className:r.PropTypes.string,trackPhotoDownloadButtonClick:r.PropTypes.func.isRequired,showFixedBottomCard:r.PropTypes.func.isRequired,hideDownloadBottomBar:r.PropTypes.func.isRequired,label:r.PropTypes.string},O={type:"default",label:"Download"},I=t.DownloadButton=function(e){var t=e.photo,o=e.trackPhotoDownloadButtonClick,n=e.type,r=e.showLabel,i=e.showTooltip,u=e.className,s=e.showFixedBottomCard,c=e.hideDownloadBottomBar,h=e.label,y=function(){o(t),c(),p.safeLocalStorage.setItem(f.HAS_DOWNLOADED_A_PHOTO,""+!0);var e=new d.SayThanksCard(t.id);s(e)},_=r&&a.default.createElement("span",{className:w.default.label},h),g=a.default.createElement(b.default,{type:"download",className:(0,l.default)(w.default.downloadIcon,(I={},I[w.default.labelIcon]=r,I))}),T=function(){return a.default.createElement(P.default,{className:w.default.tooltip,tipPositionClassName:w.default.tooltipAnchorRight},a.default.createElement("div",{className:w.default.tooltipContents},"Click the ↓ to download this photo for free."))},S=(0,m.default)(T),O=function(){switch(n){case"default":return"outline";case"alt":return"outline-alt";case"green":return"green"}}();return a.default.createElement(v.default,{className:(0,l.default)(w.default.button,u),buttonType:O,buttonSize:"small",title:"Download photo",href:t.links.download+"?force=true",rel:"nofollow",download:!0,target:"_blank",track:y},a.default.createElement("span",null,i?a.default.createElement(S,null,g):g,_));var I};I.propTypes=S,I.defaultProps=O,I.displayName="DownloadButton";var C={trackPhotoDownloadButtonClick:c.trackPhotoDownloadButtonClick,showFixedBottomCard:c.showFixedBottomCard,hideDownloadBottomBar:c.hideDownloadBottomBar};t.default=(0,i.connect)(null,C)(I)},1447:function(e,t){e.exports={"--sm-min":"(--sm-min)",colorWhite:"#fff",colorLightBlack:"#111",button:"_1Tfeo",icon:"_11dQc",downloadIcon:"Apljk _11dQc",labelIcon:"_1Jd5C",label:"_2Aga-",tooltip:"_2wyvF",tooltipAnchorRight:"GMco6",tooltipContents:"_31KQ1"}},1448:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AddToCollectionButton=void 0;var r=o(1),a=n(r),i=o(9),u=o(10),l=n(u),s=o(21),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(s),d=o(47),f=o(53),p=n(f),h=o(29),m=n(h),y=o(1449),v=o(1450),_=n(v),b={type:r.PropTypes.oneOf(["default","alt"]),photo:r.PropTypes.object.isRequired,setSelectedPhoto:r.PropTypes.func.isRequired,trackCollectionButtonClick:r.PropTypes.func.isRequired,location:r.PropTypes.object.isRequired,className:r.PropTypes.string,authUser:r.PropTypes.object,handleClick:r.PropTypes.func,children:r.PropTypes.node},g={type:"default"},P=t.AddToCollectionButton=function(e){var t=e.photo,o=e.setSelectedPhoto,n=e.trackCollectionButtonClick,r=e.location,i=e.type,u=e.className,s=e.authUser,c=e.handleClick,d=e.children,f="default"===i?"outline":"outline-alt";return a.default.createElement(p.default,{className:(0,l.default)(_.default.buttonCollections,u),buttonType:(0,y.inCollectionModifier)(f,t),buttonSize:"small",tag:"link",title:"Add to collection",to:(0,y.buildToLink)(s,r,t),onClick:function(){o({id:t.id}),n(t.id),c&&c()}},a.default.createElement(m.default,{type:"plus",className:_.default.addIcon}),a.default.createElement("span",{className:_.default.label},d,"Collect"))};P.displayName="AddToCollectionButton",P.propTypes=b,P.defaultProps=g;var T=function(e){return{authUser:(0,d.getAuthUser)(e)}},w={setSelectedPhoto:c.setSelectedPhoto,trackCollectionButtonClick:c.trackCollectionButtonClick};t.default=(0,i.connect)(T,w)(P)},1449:function(e,t,o){"use strict";function n(e,t,o){var n=e?Object.assign({},t.query,{add_to_collection_view:"is_visible"}):Object.assign({},t.query,{login_view:"is_visible",login_action:"add_to_collection",login_from_photo:o.id});return{pathname:t.pathname,query:n,state:t.state}}function r(e,t){return t.current_user_collections&&t.current_user_collections.length>0?"green":e}Object.defineProperty(t,"__esModule",{value:!0}),t.buildToLink=n,t.inCollectionModifier=r},1450:function(e,t){e.exports={floatLeft:"_2T3hc","--sm-min":"(--sm-min)",addIcon:"_2rdbO _2T3hc",label:"_1eyJo"}},1451:function(e,t){e.exports={floatLeft:"_2T3hc",floatRight:"_3pmDG","--sm-min":"(--sm-min)",colorPink:"#f15151",colorLightGrey:"#ddd",hoverTransition:"_3XJBh",container:"_3vgBX",photo:"_1hz5D",imgPhoto:"KW7g_ _1hz5D",photoInfo:"bQJ8Z",photoInfoIsShown:"_2j4gG",photoInfoLink:"_23lr1",actionsTop:"_2yfpM",actionsBottom:"_1a5YS",userContainer:"CpQi5 _2T3hc",buttonDownloadContainer:"_3i-Ef _3pmDG",addToCollectionButtonContainer:"_3W6mQ"}},1457:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1458);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1458:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return void 0===e&&(e=0),void 0===t&&(t=[]),{totalHeight:e,photos:t}}function a(e){var t=0,o=e[0];return e.forEach(function(e,n){e.totalHeight<o.totalHeight&&(t=n,o=e)}),t}function i(e){return Array.from({length:e}).map(function(){return r()})}Object.defineProperty(t,"__esModule",{value:!0}),t.Masonry=void 0;var u=o(1),l=n(u),s=o(9),c=o(10),d=n(c),f=o(21),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(f),h=o(96),m=o(141),y=o(494),v=o(190),_=o(1459),b=n(_),g=o(1465),P=o(1466),T=n(P),w=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),S={photos:u.PropTypes.array.isRequired,location:u.PropTypes.object.isRequired,smallPhotoProps:u.PropTypes.object,windowWidth:u.PropTypes.number,downloadButtonXp:u.PropTypes.oneOf(Object.keys(y.VARIANTS)),showDownloadBottomBar:u.PropTypes.func.isRequired,hideDownloadBottomBar:u.PropTypes.func.isRequired,shouldUseContainerPadding:u.PropTypes.bool},O={shouldUseContainerPadding:!0},I=function(e){function t(t){var o=e.call(this,t)||this;return o.state={gridCount:(0,v.checkIsPhoneOrTablet)(t.windowWidth)?2:3},o.renderGrid=o.renderGrid.bind(o),o}return w(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.downloadButtonXp,o=e.showDownloadBottomBar;(0,g.checkShouldShowDownloadBottomBar)(t)&&o()},t.prototype.componentWillUpdate=function(e){var t=this.props.windowWidth;e.windowWidth!==t&&((0,v.checkIsPhoneOrTablet)(e.windowWidth)?this.setState({gridCount:2}):this.setState({gridCount:3}))},t.prototype.componentWillUnmount=function(){this.props.hideDownloadBottomBar()},t.prototype.getGridData=function(e){var t=this.props.photos,o=i(e);return t.forEach(function(e){var t=o[a(o)];e.height&&e.width&&(t.totalHeight+=e.height/e.width,t.photos.push(e))}),o.map(function(e){return e.photos})},t.prototype.renderGrid=function(e,t){var o=this.props,n=o.location,r=o.photos,a=o.smallPhotoProps,i=this.state.gridCount;return l.default.createElement("div",{key:t,ref:"MasonryGrid"+t,className:(0,d.default)(T.default.Grid,3===i&&T.default.GridThree,2===i&&T.default.GridTwo,1===i&&T.default.GridOne)},e.map(function(e,t){var o=r.indexOf(e);return l.default.createElement(b.default,{smallPhotoProps:a,gridCount:i,photo:e,position:o,key:t,location:n})}))},t.prototype.render=function(){var e=this.state.gridCount,t=this.props.shouldUseContainerPadding,o=this.getGridData(e).map(this.renderGrid);return l.default.createElement("div",{id:"gridMulti",className:(0,d.default)(T.default.container,t&&T.default.containerWithPadding),"data-test":g.TEST_ATTRIBUTE},o)},t}(u.Component);t.Masonry=I,I.displayName="Masonry",I.propTypes=S,I.defaultProps=O;var C=function(e){return{windowWidth:(0,h.getWindowWidth)(e),downloadButtonXp:(0,m.getDownloadButtonXp)(e)}},E={showDownloadBottomBar:p.showDownloadBottomBar,hideDownloadBottomBar:p.hideDownloadBottomBar};t.default=(0,s.connect)(C,E)(I)},1459:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1460);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1460:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),a=n(r),i=o(9),u=o(123),l=o(498),s=o(60),c=o(1442),d=n(c),f=o(1438),p=o(1463),h=o(1464),m=n(h),y=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},v={location:r.PropTypes.object.isRequired,smallPhotoProps:r.PropTypes.object,contentWidth:r.PropTypes.number,pixelRatio:r.PropTypes.number.isRequired,photo:r.PropTypes.object.isRequired,gridCount:r.PropTypes.number.isRequired},_=function(e){var t=e.smallPhotoProps,o=e.gridCount,n=e.location,r=e.contentWidth,i=e.pixelRatio,u=e.photo,l=Math.ceil(r/o-32),c=(0,s.getImageSizeAndImgixUrl)({photo:u,isMasonry:!0,parentWidth:l,pixelRatio:i}),f=c.imageUrl,h=c.imageWidth,v=c.imageHeight;return a.default.createElement("div",{className:m.default.photoContainer,"data-test":p.TEST_ATTRIBUTE},a.default.createElement(d.default,y({fillWidth:!0,showPhotoInfoOnHover:!0,width:h,height:v,imageUrl:f,photo:u,location:n},t)))};_.displayName="MasonryPhoto",_.propTypes=v;var b=function(e){return{contentWidth:(0,l.getContentWidth)(e),pixelRatio:(0,u.getPixelRatio)(e)}};t.default=(0,f.reportPhotoImpressions)((0,i.connect)(b)(_))},1461:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var o={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),s=o(1),c=(n(s),o(99)),d=n(c),f=o(1462),p=function(e){return"function"==typeof e},h=function(e){function t(){var e,o,n,r;a(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return o=n=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n.state={inView:!1},n.node=null,n.handleNode=function(e){n.node&&(0,f.unobserve)(n.node),e&&(0,f.observe)(e,n.handleChange,n.props.threshold),n.node=e},n.handleChange=function(e){return n.setState({inView:e})},r=o,i(n,r)}return u(t,e),l(t,[{key:"componentWillUpdate",value:function(e,t){this.props.onChange&&t.inView!==this.state.inView&&(this.props.onChange(t.inView),t.inView&&e.unobserve)}},{key:"componentDidUpdate",value:function(e,t){t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&((0,f.unobserve)(this.node),this.node=null)}},{key:"componentWillUnmount",value:function(){this.node&&((0,f.unobserve)(this.node),this.node=null)}},{key:"render",value:function(){var e=this.props,t=e.children,o=e.render,n=e.tag,a=(e.triggerOnce,e.threshold,r(e,["children","render","tag","triggerOnce","threshold"])),i=this.state.inView;return(0,s.createElement)(n,Object.assign({},a,{ref:this.handleNode}),i&&p(o)?o():null,p(t)?t(i):t)}}]),t}(s.Component);h.propTypes={tag:d.default.node,children:d.default.oneOfType([d.default.func,d.default.node]),triggerOnce:d.default.bool,threshold:d.default.number,onChange:d.default.func,render:d.default.func},h.defaultProps={tag:"div",threshold:0,triggerOnce:!1},t.default=h},1462:function(e,t,o){"use strict";function n(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e&&t){var n=u.get(o);n||(n=new IntersectionObserver(a,{threshold:o}),u.set(o,n)),i.set(e,{callback:t,visible:!1,threshold:o}),n.observe(e)}}function r(e){if(e){var t=i.get(e);if(t){i.delete(e);var o=u.get(t.threshold);o&&o.unobserve(e);var n=!1;i.forEach(function(e){e.threshold===t.threshold&&(n=!0)}),o&&!n&&(o.disconnect(),u.delete(t.threshold))}}}function a(e){e.forEach(function(e){if(i.has(e.target)){var t=e.isIntersecting,o=e.intersectionRatio,n=e.target,r=i.get(n),a=r.callback,u=r.visible,l=r.threshold,s=u?o>l:o>=l;void 0!==t&&(s=s&&t),i.set(n,{callback:a,visible:s,threshold:l}),a&&a(s)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.observe=n,t.unobserve=r;var i=new Map,u=new Map;t.default={observe:n,unobserve:r}},1463:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TEST_ATTRIBUTE="photo-component"},1464:function(e,t){e.exports={photoContainer:"_1pn7R"}},1465:function(e,t,o){"use strict";function n(e){var t=r.safeLocalStorageHelpers.hasItem(a.HAS_DOWNLOADED_A_PHOTO);return e===i.VARIANTS.showBottomBar&&!t}Object.defineProperty(t,"__esModule",{value:!0}),t.TEST_ATTRIBUTE=void 0,t.checkShouldShowDownloadBottomBar=n;var r=o(20),a=o(493),i=o(494);t.TEST_ATTRIBUTE="photos-grid-view"},1466:function(e,t){e.exports={floatLeft:"_2T3hc","--sm-min":"(--sm-min)",clearfix:"_2TNYr",container:"_3_WtK _2TNYr",containerWithPadding:"_1C-lZ",Grid:"_1OvAL _2T3hc",GridThree:"_27nWV",GridTwo:"_1eGVY",GridOne:"_3nHtz"}},1566:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1569);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1567:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1570);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1569:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Collection=void 0;var r=o(1),a=n(r),i=o(9),u=o(10),l=n(u),s=o(58),c=n(s),d=o(123),f=o(20),p=o(188),h=o(1414),m=n(h),y=o(29),v=n(y),_=o(1567),b=n(_),g=o(1571),P=n(g),T=o(1572),w={collection:r.PropTypes.object.isRequired,columns:r.PropTypes.number,hideCollector:r.PropTypes.bool,pixelRatio:r.PropTypes.number.isRequired,onClick:r.PropTypes.func},S={columns:1,hideCollector:!1,onClick:function(){}},O=t.Collection=function(e){var t,o=e.collection,n=e.hideCollector,r=e.columns,i=e.pixelRatio,u=e.onClick,s=o.user,d=o.cover_photo,h=o.private,y=(0,p.buildCollectionUrl)(o),_=(0,f.buildCollectionTitle)(o),g=(0,T.getCollectionWidth)(r),w=(0,T.buildCoverPhotoUrl)(d,g,i);1===r?t=T.TEST_ATTRIBUTES.FULL:2===r?t=T.TEST_ATTRIBUTES.HALF:3===r&&(t=T.TEST_ATTRIBUTES.THIRD);var S=w&&(0,f.urlToBackgroundImage)(w);return a.default.createElement("div",{"data-test":t,className:(0,l.default)(P.default.collectionContainer,1===r&&P.default.full,2===r&&P.default.half,3===r&&P.default.third),style:{backgroundImage:S}},a.default.createElement("div",{className:P.default.collectionImage}),a.default.createElement("div",{className:P.default.overlay},a.default.createElement(c.default,{className:P.default.collectionAnchor,to:{pathname:y},onClick:u},a.default.createElement("div",{className:P.default.topRow},a.default.createElement("h4",{className:(0,l.default)(P.default.photoCount,3===r&&P.default.photoCountThird)},a.default.createElement(b.default,{curated:o.curated,publishedAt:o.published_at,totalPhotos:o.total_photos}))),a.default.createElement("h2",{className:(0,l.default)(P.default.title,3===r&&P.default.titleThird,1===r&&P.default.titleFull)},h&&a.default.createElement(v.default,{type:"lock",className:P.default.isPrivate}),_)),n?null:a.default.createElement("div",{className:(0,l.default)(P.default.userLinkContainer,3===r&&P.default.userLinkContainerThird)},a.default.createElement(m.default,{inline:!0,includeAvatar:!0,user:s,type:"alt"}))))};O.propTypes=w,O.defaultProps=S;var I=function(e){return{pixelRatio:(0,d.getPixelRatio)(e)}};t.default=(0,i.connect)(I)(O)},1570:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),a=n(r),i=o(20),u=o(505),l=n(u),s={curated:r.PropTypes.bool.isRequired,publishedAt:r.PropTypes.string,totalPhotos:r.PropTypes.number},c=function(e){var t=e.curated,o=e.publishedAt,n=e.totalPhotos;return t?a.default.createElement("span",null,(0,i.formatDate)(new Date(o))):a.default.createElement("span",null,a.default.createElement(l.default,{number:n})," ",(0,i.pluralizePhoto)(n))};c.propTypes=s,t.default=c},1571:function(e,t){e.exports={"--sm":"(--sm)","--sm-min":"(--sm-min)","--md-min":"(--md-min)",floatLeft:"_2T3hc",floatRight:"_3pmDG",clearfix:"_2TNYr",colorWhite:"#fff",fontWeightNormal:"_27Bp2",fontWeightSemibold:"_13Ib2",textTransformUppercase:"_3dLF0",textDecorationNone:"_1CBrG",collectionContainer:"_3GJR0",full:"_3YbcI",half:"_1JFIz",third:"_1oP91",collectionImage:"_2-WIS",overlay:"_36bYd",userLinkContainer:"CkHYc",collectionAnchor:"_3Hy4V _1CBrG",title:"_3-lOK _13Ib2",titleFull:"_3muMa",titleThird:"kH7jt",topRow:"_3B29A _2TNYr",photoCount:"_29Z-j _2T3hc _27Bp2",photoCountThird:"_2R8Hz",isPrivate:"_2wttd"}},1572:function(e,t,o){"use strict";function n(e){switch(e){case 1:return 1176;case 2:return 576;case 3:return 376;default:return 576}}function r(e,t,o){return e?(0,a.buildMaxWidthImgixUrlDEPRECATED)({url:e.urls.raw,width:t,pixelRatio:o}):null}Object.defineProperty(t,"__esModule",{value:!0}),t.TEST_ATTRIBUTES=void 0,t.getCollectionWidth=n,t.buildCoverPhotoUrl=r;var a=o(20);t.TEST_ATTRIBUTES={FULL:"collection-columns",HALF:"collection-columns-half",THIRD:"collection-columns-third"}},1573:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.RelatedCollectionsType=void 0;!function(e){e.related="related",e.collected="collected"}(t.RelatedCollectionsType=n=n||(t.RelatedCollectionsType=n={}));t.checkPhotoEntityHasFullInfo=function(e){return"related_collections"in e},t.checkPhotoEntityHasBasicInfo=function(e){return"description"in e},t.checkPhotoEntityHasStats=function(e){return"stats"in e}},1578:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.generateImgDensitySrcSetString=t.generateImgWidthSrcSetString=t.serializeSrcSet=void 0;var r=o(1589),a=n(r),i=o(1592),u=n(i),l=o(1593),s=n(l),c=o(77),d=o(193),f=o(24),p=o(512),h=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(o[n[r]]=e[n[r]]);return o},m=function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var n,r,a=o.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return i},y=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e},v=function(e){var t=e.lowerBound,o=e.upperBound,n=e.interval,r=Math.ceil(o),i=y((0,a.default)(Math.ceil(t),r,Math.ceil(n)),[r]),l=i.map(function(e){return 2*e}).filter(function(e){return e<r});return(0,s.default)((0,u.default)(y(i,l)))},_=function(e){return"density"in e},b=function(e){var t=e.baseUrl;return function(e){return{width:e,url:(0,d.buildImgixUrlWithDefaults)(t)({w:e})}}},g=function(e){return(0,f.catOptions)([c.Option.of(e.url),_(e)?c.Option.of(e.density).map(p.numberToDensity):c.Option.of(e.width).map(p.numberToWidth)]).join(" ")},P=t.serializeSrcSet=function(e){return e.map(g).join(", ")},T=(t.generateImgWidthSrcSetString=function(e){var t=e.baseUrl,o=h(e,["baseUrl"]),n=v(o),r=n.map(b({baseUrl:t}));return P(r)},(0,a.default)(1,5)),w=function(e){var t=e.baseUrl,o=e.width;return function(e){return{density:e,url:(0,d.buildImgixUrlWithDefaults)(t)({w:o,dpr:e})}}};t.generateImgDensitySrcSetString=function(e){var t=T.map(w(e));return P(t)}},1588:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.VIEW_MORE_ARROW_LIMIT=3,t.MAXIMUM_TITLE_TAGS_COUNT=4,t.MAXIMUM_RELATED_SEARCHES_COUNT=12},1589:function(e,t,o){var n=o(1590),r=n();e.exports=r},1590:function(e,t,o){function n(e){return function(t,o,n){return n&&"number"!=typeof n&&a(t,o,n)&&(o=n=void 0),t=i(t),t=t===t?t:0,void 0===o?(o=t,t=0):o=i(o)||0,n=void 0===n?t<o?1:-1:i(n)||0,r(t,o,n,e)}}var r=o(1591),a=o(509),i=o(291);e.exports=n},1591:function(e,t){function o(e,t,o,a){for(var i=-1,u=r(n((t-e)/(o||1)),0),l=Array(u);u--;)l[a?u:++i]=e,e+=o;return l}var n=Math.ceil,r=Math.max;e.exports=o},1592:function(e,t,o){var n=o(125),r=o(523),a=o(509),i=o(126),u=i(function(e,t){if(null==e)return[];var o=t.length;return o>1&&a(e,t[0],t[1])?t=[]:o>2&&a(t[0],t[1],t[2])&&(t.length=1),r(e,n(t,1),[])});e.exports=u},1593:function(e,t,o){function n(e){return e&&e.length?r(e):[]}var r=o(1594);e.exports=n},1594:function(e,t,o){function n(e){return r(e)}var r=o(1595);e.exports=n},1595:function(e,t,o){function n(e,t){for(var o=0,n=e.length,a=e[0],i=t?t(a):a,u=i,l=0,s=[a];++o<n;)a=e[o],i=t?t(a):a,r(i,u)||(u=i,s[++l]=a);return s}var r=o(198);e.exports=n},1599:function(e,t,o){"use strict";var n=o(18),r=o(1649);n.Observable.prototype.catch=r._catch,n.Observable.prototype._catch=r._catch},1600:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.RemoteDataTypes=void 0;!function(e){e.NotAsked="NotAsked",e.Loading="Loading",e.Failure="Failure",e.Success="Success"}(t.RemoteDataTypes=n=n||(t.RemoteDataTypes=n={}));var r=function(){function e(){this.type=n.NotAsked}return e}();t.NotAsked=r;var a=function(){function e(){this.type=n.Loading}return e}();t.Loading=a;var i=function(){function e(e){this.value=e,this.type=n.Failure}return e}();t.Failure=i;var u=function(){function e(e){this.value=e,this.type=n.Success}return e}();t.Success=u},1612:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1613);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1613:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),a=n(r),i=o(10),u=n(i),l=o(504),s=n(l),c=o(511),d=n(c),f=o(1588),p=o(1614),h=n(p),m={headingCopy:"Related searches",keywords:[],showHeading:!1,hideOnMobile:!1},y=function(e){var t=e.showHeading,o=e.keywords,n=e.hideOnMobile,r=e.headingCopy,i=(0,s.default)(o,f.MAXIMUM_RELATED_SEARCHES_COUNT);return i.length<1?a.default.createElement("div",null):a.default.createElement("div",{className:(0,u.default)(h.default.container,(l={},l[h.default.hideOnMobile]=n,l))},t&&a.default.createElement("p",{className:h.default.heading},r),a.default.createElement("div",{className:h.default.tagsContainer},i.map(function(e){return a.default.createElement(d.default,{key:e.title,title:e.title,backgroundImage:e.url,size:c.TagSize.small,className:h.default.tagOverrides})})));var l};y.displayName="RelatedTags",y.defaultProps=m,t.default=y},1614:function(e,t){e.exports={"--sm-min":"(--sm-min)","--xs-max":"(--xs-max)",clearfix:"_2KLco",mxn2:"_3hepI",fontWeightNormal:"_27Bp2",container:"_3w_cF",heading:"_2azK- _27Bp2",hideOnMobile:"_1Co2N",tagsContainer:"_18n5E",tagOverrides:"qr8Tb"}},1628:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapPhotoIdsToPhotos=void 0;var n=o(1),r=function(e){return e&&e.__esModule?e:{default:e}}(n),a=o(9),i=o(293),u=o(525),l=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};t.mapPhotoIdsToPhotos=function(e){var t="MapPhotoIdsToPhotos("+(0,u.getDisplayName)(e)+")",o=function(t){var o=t.photos;return r.default.createElement(e,l({},t,{photos:o}))};o.displayName=t;var n=function(){var e=(0,i.makeGetDenormalizedPhotoByIds)();return function(t,o){return{photos:e(t,o.photoIds)}}};return(0,a.connect)(n)(o)}},1649:function(e,t,o){"use strict";function n(e){var t=new u(e),o=this.lift(t);return t.caught=o}var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=o(195),i=o(196);t._catch=n;var u=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.selector,this.caught))},e}(),l=function(e){function t(t,o,n){e.call(this,t),this.selector=o,this.caught=n}return r(t,e),t.prototype.error=function(t){if(!this.isStopped){var o=void 0;try{o=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle(),this.add(i.subscribeToResult(this,o))}},t}(a.OuterSubscriber)},1650:function(e,t,o){"use strict";function n(e){return e&&"function"==typeof e.schedule}t.isScheduler=n},1651:function(e,t,o){"use strict";var n=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},r=o(18),a=o(1679),i=o(539),u=o(1650),l=function(e){function t(t,o){e.call(this),this.array=t,this.scheduler=o,o||1!==t.length||(this._isScalar=!0,this.value=t[0])}return n(t,e),t.create=function(e,o){return new t(e,o)},t.of=function(){for(var e=[],o=0;o<arguments.length;o++)e[o-0]=arguments[o];var n=e[e.length-1];u.isScheduler(n)?e.pop():n=null;var r=e.length;return r>1?new t(e,n):1===r?new a.ScalarObservable(e[0],n):new i.EmptyObservable(n)},t.dispatch=function(e){var t=e.array,o=e.index,n=e.count,r=e.subscriber;if(o>=n)return void r.complete();r.next(t[o]),r.closed||(e.index=o+1,this.schedule(e))},t.prototype._subscribe=function(e){var o=this.array,n=o.length,r=this.scheduler;if(r)return r.schedule(t.dispatch,0,{array:o,index:0,count:n,subscriber:e});for(var a=0;a<n&&!e.closed;a++)e.next(o[a]);e.complete()},t}(r.Observable);t.ArrayObservable=l},1652:function(e,t,o){"use strict";function n(e){return e.catch(function(e){if(u(e)||e instanceof r.AjaxResponse||e instanceof r.AjaxError){var t=e.xhr.response;null!==t&&(0,a.throwErrorsIfPresent)(t)}throw e})}Object.defineProperty(t,"__esModule",{value:!0}),t.checkIsAjaxNetworkError=t.checkIsMockAjaxResponse=t.IS_MOCK_AJAX_RESPONSE=void 0,t.throwErrorsInObservableIfPresent=n;var r=o(537);o(1599);var a=o(61),i=t.IS_MOCK_AJAX_RESPONSE="IS_MOCK_AJAX_RESPONSE",u=t.checkIsMockAjaxResponse=function(e){return i in e};t.checkIsAjaxNetworkError=function(e){return e instanceof r.AjaxError&&"ajax error 0"===e.message}},1678:function(e,t,o){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(r.apply(void 0,[this].concat(e)))}function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var o=null,n=e;return i.isScheduler(n[e.length-1])&&(o=n.pop()),null===o&&1===e.length&&e[0]instanceof a.Observable?e[0]:new u.ArrayObservable(e,o).lift(new l.MergeAllOperator(1))}var a=o(18),i=o(1650),u=o(1651),l=o(1882);t.concat=n,t.concatStatic=r},1679:function(e,t,o){"use strict";var n=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},r=o(18),a=function(e){function t(t,o){e.call(this),this.value=t,this.scheduler=o,this._isScalar=!0,o&&(this._isScalar=!1)}return n(t,e),t.create=function(e,o){return new t(e,o)},t.dispatch=function(e){var t=e.done,o=e.value,n=e.subscriber;if(t)return void n.complete();n.next(o),n.closed||(e.done=!0,this.schedule(e))},t.prototype._subscribe=function(e){var o=this.value,n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{done:!1,value:o,subscriber:e});e.next(o),e.closed||e.complete()},t}(r.Observable);t.ScalarObservable=a},1680:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1893);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1681:function(e,t,o){"use strict";t.__esModule=!0;var n=o(1909),r=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(e){return(0,r.default)("displayName",e)};t.default=a},1682:function(e,t,o){"use strict";t.__esModule=!0;var n=o(1910),r=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(e,t){return t+"("+(0,r.default)(e)+")"};t.default=a},1683:function(e,t){e.exports={outerHorizontalGutter:"17px",innerHorizontalGutter:"10px",cellPadding:"5px",container:"_307c3",actions:"_3-6v7",cell:"_2iWc-",buttonCell:"_27vvN _2iWc-",photographer:"HAAez _2iWc-",downloadButtonCell:"_13Q- _27vvN _2iWc-",downloadButton:"_1AA_u"}},1684:function(e,t){e.exports={fontWeightNormal:"_27Bp2",heading:"_2y38F _27Bp2"}},1873:function(e,t,o){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1),i=r(a),u=o(9),l=o(1874),s=r(l),c=o(18),d=o(207);o(499),o(1599),o(1875),o(1877),o(1879),o(1881),o(1883),o(1885),o(1887),o(1889);var f=o(21),p=n(f),h=o(1652),m=o(536),y=n(m),v=o(97),_=o(293),b=o(96),g=o(47),P=o(1573),T=o(1600),w=o(24),S=o(69),O=o(150),I=o(20),C=o(1891),E=r(C),k=o(1899),M=r(k),R=o(1904),N=o(1905),D=r(N),A=o(534),j=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),L=function(e){return(0,h.throwErrorsInObservableIfPresent)(y.getPhotoWithInfo({photoId:e}).map(function(e){return e.response}))},B=function(e){return(0,h.throwErrorsInObservableIfPresent)(y.getRelatedPhotos({photoId:e}).map(function(e){return e.response}))},x=function(e){return(0,h.throwErrorsInObservableIfPresent)(y.getPhotoStats({photoId:e}).map(function(e){return e.response}))},U=(0,v.normalizeResponse)("photo"),F=(0,v.normalizeResponse)("relatedPhotos"),W=function(e){return void 0!==e.currentSrc&&(0,I.isNonEmptyString)(e.currentSrc)?e.currentSrc:(0,I.isNonEmptyString)(e.src)?e.src:void 0},H=function(e){function t(t){var o=e.call(this,t)||this;return o.resetNumberOfRequests=function(){o.resetNumberOfRequestsSubject.next({})},o.onRequestToggleTruncatedDescription=function(){var e=o.props.location;o.context.router.replace((0,O.updatePhotosPageLocationState)({location:e},function(e){return{shouldTruncateDescription:!e.shouldTruncateDescription}}))},o.state=o.getInitialState(),o.onRequestMainImageToggleCollapsed=o.onRequestMainImageToggleCollapsed.bind(o),o.onMainImageLoad=o.onMainImageLoad.bind(o),o.setupProgressBar(),o}return j(t,e),t.prototype.getInitialState=function(){return{photoFullInfoRemoteData:new T.NotAsked,relatedPhotoIdsRemoteData:new T.NotAsked,photoStatsRemoteData:new T.NotAsked,mainImageCurrentSrc:void 0}},t.prototype.componentWillMount=function(){var e=this.props.location;this.fetchThenCacheAndSet(),(0,A.checkIsPhotoInfoRoute)(e.pathname)&&this.fetchPhotoStatsThenCacheAndSet()},t.prototype.componentWillReceiveProps=function(e){var t=this.props,o=t.params,n=t.maybePhoto,r=e.maybePhoto,a=o.id,i=e.params.id,u=this.state,l=u.photoStatsRemoteData,s=u.photoFullInfoRemoteData;a!==i?this.reset():n!==r&&void 0!==r&&(s.type===T.RemoteDataTypes.Success&&(0,P.checkPhotoEntityHasFullInfo)(r)&&this.updatePhotoFullInfoRemoteData(new T.Success(r)),l.type===T.RemoteDataTypes.Success&&(0,P.checkPhotoEntityHasStats)(r)&&this.updatePhotoStatsRemoteData(new T.Success(r.stats)))},t.prototype.componentDidUpdate=function(e){var t=this.props,o=t.params,n=t.location;o.id!==e.params.id&&(this.cleanup(),this.fetchThenCacheAndSet());var r=(0,A.checkIsPhotoInfoRoute)(e.location.pathname),a=(0,A.checkIsPhotoInfoRoute)(n.pathname);!r&&a?this.fetchPhotoStatsThenCacheAndSet():r&&!a&&this.onInfoRouteLeave()},t.prototype.componentWillUnmount=function(){this.cleanup()},t.prototype.onRootRouteLeave=function(){void 0!==this.photoInfoSubscription&&this.photoInfoSubscription.unsubscribe(),void 0!==this.relatedPhotosSubscription&&this.relatedPhotosSubscription.unsubscribe()},t.prototype.setupProgressBar=function(){this.requestSubject=new d.Subject;var e=this.requestSubject.asObservable(),t=this.props,o=t.hideProgressBar,n=t.showProgressBar,r=function(e){return e>0},a=function(e){e?n():o()};this.resetNumberOfRequestsSubject=new d.Subject,this.resetNumberOfRequestsSubject.asObservable().startWith({}).switchMap(function(){return e.flatMap(function(e){return c.Observable.of(1).concat(e.mapTo(-1))}).scan(s.default,0).startWith(0)}).map(r).distinctUntilChanged().subscribe(a)},t.prototype.onInfoRouteLeave=function(){void 0!==this.photoStatsSubscription&&this.photoStatsSubscription.unsubscribe()},t.prototype.cleanup=function(){this.onRootRouteLeave(),this.onInfoRouteLeave()},t.prototype.updatePhotoFullInfoRemoteData=function(e){this.setState({photoFullInfoRemoteData:e})},t.prototype.updateRelatedPhotoIdsRemoteData=function(e){this.setState({relatedPhotoIdsRemoteData:e})},t.prototype.updatePhotoStatsRemoteData=function(e){this.setState({photoStatsRemoteData:e})},t.prototype.reset=function(){this.setState(this.getInitialState()),this.resetNumberOfRequests()},t.prototype.fetchThenCacheAndSet=function(){var e=this,t=this.props,o=t.params,n=t.updateData,r=t.maybePhoto,a=t.setErrorFlash,i=o.id,u=this.context.router.replace;this.updatePhotoFullInfoRemoteData(new T.Loading);var l=L(i).map(function(e){return{normalizedResponse:U(e),remoteData:new T.Success(e)}}).catch(function(e){return c.Observable.of({normalizedResponse:void 0,remoteData:new T.Failure(e)})}).share();this.photoInfoSubscription=l.subscribe(function(t){var o=t.normalizedResponse,i=t.remoteData;i.type===T.RemoteDataTypes.Failure&&((0,h.checkIsAjaxNetworkError)(i.value)?a({message:"There was a network error. Please check your internet connection."}):(a({message:"There was a server error. Please try again later."}),void 0===r&&(0,S.handleClientSideError)(u)(i.value))),void 0!==o&&n(o.entities),e.updatePhotoFullInfoRemoteData(i)}),this.updateRelatedPhotoIdsRemoteData(new T.Loading);var s=B(i).map(function(e){return{normalizedResponse:F(e),remoteData:new T.Success(e.results.map(function(e){return e.id}))}}).catch(function(e){return c.Observable.of({normalizedResponse:void 0,remoteData:new T.Failure(e)})}).share();this.relatedPhotosSubscription=s.subscribe(function(t){var o=t.normalizedResponse,r=t.remoteData;void 0!==o&&n(o.entities),e.updateRelatedPhotoIdsRemoteData(r)}),this.requestSubject.next(l),this.requestSubject.next(s)},t.prototype.fetchPhotoStatsThenCacheAndSet=function(){var e=this,t=this.props,o=t.params,n=t.updatePhotoStats,r=o.id;this.updatePhotoStatsRemoteData(new T.Loading);var a=x(r).map(function(e){return{response:e,remoteData:new T.Success(e)}}).catch(function(e){return c.Observable.of({response:void 0,remoteData:new T.Failure(e)})}).share();this.photoStatsSubscription=a.subscribe(function(t){var o=t.response,a=t.remoteData;void 0!==o&&n(r,o),e.updatePhotoStatsRemoteData(a)}),this.requestSubject.next(a)},t.prototype.onRequestMainImageToggleCollapsed=function(){this.trackToggleMainImageCollapsed(),this.toggleMainImageCollapsed()},t.prototype.trackToggleMainImageCollapsed=function(){var e=this.props,t=e.location,o=e.trackZoomedInPhoto,n=e.trackZoomedOutPhoto,r=e.params,a=r.id;(0,O.getPhotosPageLocationStateFromLocationWithDefault)({location:t}).isMainImageCurrentlyCollapsed?o(a):n(a)},t.prototype.toggleMainImageCollapsed=function(){var e=this.props,t=e.isModal,o=e.location,n=e.onRequestPageModalResetScroll,r=this.context.router;t&&n(),r.replace((0,O.updatePhotosPageLocationState)({location:o},function(e){return{isMainImageCurrentlyCollapsed:!e.isMainImageCurrentlyCollapsed}}))},t.prototype.onMainImageLoad=function(e){this.setState({mainImageCurrentSrc:W(e.currentTarget)})},t.prototype.renderChildRoute=function(){var e=this.props,t=e.params,o=e.isBehindPageModal,n=e.location,r=e.maybePhoto,a=this.state,u=a.photoStatsRemoteData,l=a.photoFullInfoRemoteData,s=t.id,c=(0,O.getModalLocationStateFromLocation)(n),d=(0,w.mapMaybe)(function(e){return(0,P.checkPhotoEntityHasBasicInfo)(e)?e.urls.raw:void 0},r),f=(0,O.getPhotosPageLocationStateFromLocationWithDefault)({location:n}),p=(0,w.mapMaybe)(function(e){return e.initialSrc},f),h=(0,A.getPhotoChildRouteFromPathname)(n.pathname),m=function(){return!o&&void 0!==c};switch(h){case A.PhotoChildRoute.info:return m()&&i.default.createElement(E.default,{maybeCachedPhoto:r,photoId:s,modalLocationState:c,maybeMainImageCurrentSrc:p,maybeRawPhotoUrl:d,photoFullInfoRemoteData:l,photoStatsRemoteData:u});case A.PhotoChildRoute.share:return m()&&i.default.createElement(M.default,{maybeCachedPhoto:r,photoId:s,modalLocationState:c,maybeMainImageCurrentSrc:p,maybeRawPhotoUrl:d,photoFullInfoRemoteData:l});case void 0:return}},t.prototype.render=function(){var e=this.props,t=e.maybePhoto,o=e.isModal,n=e.location,r=e.isLoggedIn,a=e.isPhone,u=this.state,l=u.photoFullInfoRemoteData,s=u.relatedPhotoIdsRemoteData,c=(0,O.getPhotosPageLocationStateFromLocationWithDefault)({location:n}),d=c.isMainImageCurrentlyCollapsed,f=c.shouldTruncateDescription,p=(0,w.mapMaybe)(function(e){return e.initialSrc},c),h=!a;return i.default.createElement("div",{"data-test":R.TEST_ATTRIBUTE},i.default.createElement(D.default,{maybeCachedPhoto:t,isModal:o,location:n,photoFullInfoRemoteData:l,maybeMainImageInitialSrc:p,relatedPhotoIdsRemoteData:s,onMainImageLoad:this.onMainImageLoad,isMainImageCurrentlyCollapsed:d,shouldAllowMainImageCollapsingBehaviour:h,onRequestMainImageToggleCollapsed:this.onRequestMainImageToggleCollapsed,shouldTruncateDescription:f,onRequestToggleTruncatedDescription:this.onRequestToggleTruncatedDescription,isLoggedIn:r}),this.renderChildRoute())},t.contextTypes={router:a.PropTypes.object.isRequired},t}(a.PureComponent),q=function(){var e=(0,_.makeGetDenormalizedPhotoById)();return function(t,o){var n=o.params,r=n.id;return{maybePhoto:(0,w.normalizeMaybe)(e(t,r)),isPhone:(0,b.getIsPhone)(t),isLoggedIn:(0,g.getIsLoggedIn)(t)}}},G={updateData:p.updateData,updatePhotoStats:p.updatePhotoStats,setErrorFlash:p.setErrorFlash,trackZoomedInPhoto:p.trackZoomedInPhoto,trackZoomedOutPhoto:p.trackZoomedOutPhoto,showProgressBar:p.showProgressBar,hideProgressBar:p.hideProgressBar};t.default=(0,u.connect)(q,G)(H)},1874:function(e,t){function o(e,t){var o;return void 0===e&&void 0===t?0:(void 0!==e&&(o=e),void 0!==t&&(o=void 0===o?t:o+t),o)}e.exports=o},1875:function(e,t,o){"use strict";var n=o(18),r=o(1876);n.Observable.prototype.mergeMap=r.mergeMap,n.Observable.prototype.flatMap=r.mergeMap},1876:function(e,t,o){"use strict";function n(e,t,o){return void 0===o&&(o=Number.POSITIVE_INFINITY),"number"==typeof t&&(o=t,t=null),this.lift(new u(e,t,o))}var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=o(196),i=o(195);t.mergeMap=n;var u=function(){function e(e,t,o){void 0===o&&(o=Number.POSITIVE_INFINITY),this.project=e,this.resultSelector=t,this.concurrent=o}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.project,this.resultSelector,this.concurrent))},e}();t.MergeMapOperator=u;var l=function(e){function t(t,o,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY),e.call(this,t),this.project=o,this.resultSelector=n,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return r(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,o=this.index++;try{t=this.project(e,o)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,o)},t.prototype._innerSub=function(e,t,o){this.add(a.subscribeToResult(this,e,t,o))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,o,n,r){this.resultSelector?this._notifyResultSelector(e,t,o,n):this.destination.next(t)},t.prototype._notifyResultSelector=function(e,t,o,n){var r;try{r=this.resultSelector(e,t,o,n)}catch(e){return void this.destination.error(e)}this.destination.next(r)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber);t.MergeMapSubscriber=l},1877:function(e,t,o){"use strict";var n=o(18),r=o(1878);n.Observable.prototype.switchMap=r.switchMap},1878:function(e,t,o){"use strict";function n(e,t){return this.lift(new u(e,t))}var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=o(195),i=o(196);t.switchMap=n;var u=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.project,this.resultSelector))},e}(),l=function(e){function t(t,o,n){e.call(this,t),this.project=o,this.resultSelector=n,this.index=0}return r(t,e),t.prototype._next=function(e){var t,o=this.index++;try{t=this.project(e,o)}catch(e){return void this.destination.error(e)}this._innerSub(t,e,o)},t.prototype._innerSub=function(e,t,o){var n=this.innerSubscription;n&&n.unsubscribe(),this.add(this.innerSubscription=i.subscribeToResult(this,e,t,o))},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,o,n,r){this.resultSelector?this._tryNotifyNext(e,t,o,n):this.destination.next(t)},t.prototype._tryNotifyNext=function(e,t,o,n){var r;try{r=this.resultSelector(e,t,o,n)}catch(e){return void this.destination.error(e)}this.destination.next(r)},t}(a.OuterSubscriber)},1879:function(e,t,o){"use strict";var n=o(18),r=o(1880);n.Observable.prototype.scan=r.scan},1880:function(e,t,o){"use strict";function n(e,t){var o=!1;return arguments.length>=2&&(o=!0),this.lift(new i(e,t,o))}var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=o(48);t.scan=n;var i=function(){function e(e,t,o){void 0===o&&(o=!1),this.accumulator=e,this.seed=t,this.hasSeed=o}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.accumulator,this.seed,this.hasSeed))},e}(),u=function(e){function t(t,o,n,r){e.call(this,t),this.accumulator=o,this._seed=n,this.hasSeed=r,this.index=0}return r(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,o=this.index++;try{t=this.accumulator(this.seed,e,o)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},t}(a.Subscriber)},1881:function(e,t,o){"use strict";var n=o(18),r=o(1678);n.Observable.prototype.concat=r.concat},1882:function(e,t,o){"use strict";function n(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),this.lift(new u(e))}var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=o(195),i=o(196);t.mergeAll=n;var u=function(){function e(e){this.concurrent=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.concurrent))},e}();t.MergeAllOperator=u;var l=function(e){function t(t,o){e.call(this,t),this.concurrent=o,this.hasCompleted=!1,this.buffer=[],this.active=0}return r(t,e),t.prototype._next=function(e){this.active<this.concurrent?(this.active++,this.add(i.subscribeToResult(this,e))):this.buffer.push(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(a.OuterSubscriber);t.MergeAllSubscriber=l},1883:function(e,t,o){"use strict";var n=o(18),r=o(1884);n.Observable.prototype.mapTo=r.mapTo},1884:function(e,t,o){"use strict";function n(e){return this.lift(new i(e))}var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=o(48);t.mapTo=n;var i=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.value))},e}(),u=function(e){function t(t,o){e.call(this,t),this.value=o}return r(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(a.Subscriber)},1885:function(e,t,o){"use strict";var n=o(18),r=o(1886);n.Observable.prototype.distinctUntilChanged=r.distinctUntilChanged},1886:function(e,t,o){"use strict";function n(e,t){return this.lift(new l(e,t))}var r=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=o(48),i=o(206),u=o(151);t.distinctUntilChanged=n;var l=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.compare,this.keySelector))},e}(),s=function(e){function t(t,o,n){e.call(this,t),this.keySelector=n,this.hasKey=!1,"function"==typeof o&&(this.compare=o)}return r(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t=this.keySelector,o=e;if(t&&(o=i.tryCatch(this.keySelector)(e))===u.errorObject)return this.destination.error(u.errorObject.e);var n=!1;if(this.hasKey){if((n=i.tryCatch(this.compare)(this.key,o))===u.errorObject)return this.destination.error(u.errorObject.e)}else this.hasKey=!0;!1===Boolean(n)&&(this.key=o,this.destination.next(e))},t}(a.Subscriber)},1887:function(e,t,o){"use strict";var n=o(18),r=o(1888);n.Observable.prototype.startWith=r.startWith},1888:function(e,t,o){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var o=e[e.length-1];l.isScheduler(o)?e.pop():o=null;var n=e.length;return 1===n?u.concatStatic(new a.ScalarObservable(e[0],o),this):n>1?u.concatStatic(new r.ArrayObservable(e,o),this):u.concatStatic(new i.EmptyObservable(o),this)}var r=o(1651),a=o(1679),i=o(539),u=o(1678),l=o(1650);t.startWith=n},1889:function(e,t,o){"use strict";var n=o(18),r=o(1890);n.Observable.of=r.of},1890:function(e,t,o){"use strict";var n=o(1651);t.of=n.ArrayObservable.of},1891:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1892);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1892:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),a=n(r),i=o(1680),u=n(i),l=o(1895),s=n(l),c=function(e){var t=e.maybeCachedPhoto,o=e.photoId,n=e.maybeMainImageCurrentSrc,r=e.maybeRawPhotoUrl,i=e.photoFullInfoRemoteData,l=e.photoStatsRemoteData,c=e.modalLocationState;return a.default.createElement(u.default,{photoId:o,modalLocationState:c,maybeMainImageCurrentSrc:n,maybeRawPhotoUrl:r},a.default.createElement(s.default,{maybeCachedPhoto:t,photoFullInfoRemoteData:i,photoStatsRemoteData:l}))};t.default=c},1893:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),a=n(r),i=o(20),u=o(24),l=o(562),s=n(l),c=o(1894),d=n(c),f=function(e){return{backgroundImage:["linear-gradient(hsla(0, 0%, 100%, 0.8), white 150px)",(0,i.urlToBackgroundImage)(e)].join(", "),backgroundSize:["auto","cover"].join(", ")}},p=function(e){var t=e.maybeRawPhotoUrl,o=e.maybeMainImageCurrentSrc,n=function(e){return(0,i.buildImgixUrlDEPRECATED)({url:e,width:String(200),blur:String(20)})};return(0,u.orElseMaybe)(function(){return(0,u.mapMaybe)(n,t)},o)},h=function(e){var t=e.photoId,o=e.maybeRawPhotoUrl,n=e.maybeMainImageCurrentSrc,r=e.modalLocationState,i=e.children,l=p({maybeRawPhotoUrl:o,maybeMainImageCurrentSrc:n});return a.default.createElement(s.default,{redirectTo:{pathname:"/photos/"+t},modalLocationState:r,contentStyles:(0,u.mapMaybe)(f,l),contentClassName:d.default.modalContent},i)};t.default=h},1894:function(e,t){e.exports={modalContent:"_29NeT"}},1895:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1896);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1896:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r,a=o(1),i=n(a),u=o(9),l=o(1573),s=o(1600),c=o(24),d=o(20),f=o(47),p=o(60),h=o(496),m=n(h),y=o(29),v=n(y),_=o(1897),b=o(1898),g=n(b);!function(e){e[e.views=0]="views",e[e.downloads=1]="downloads",e[e.likes=2]="likes"}(r||(r={}));var P=function(e){switch(e){case r.views:return"eye-thin";case r.downloads:return"download-arrow-thin";case r.likes:return"heart-thin"}},T=function(e){switch(e){case r.views:return"Views";case r.downloads:return"Downloads";case r.likes:return"Likes"}},w=function(){return i.default.createElement("div",{className:g.default.container},i.default.createElement("div",{className:g.default.cell},i.default.createElement(m.default,{padContentBelow:!1})))},S=function(e){var t=e.statRemoteData;switch(t.type){case s.RemoteDataTypes.Success:var o=t.value;return i.default.createElement("dd",{className:g.default.statValue},i.default.createElement("span",{className:g.default.statValueTotal},(0,d.formatNumber)(o.total)),i.default.createElement("span",{className:g.default.statValueDelta},(0,d.formatNumberWithSign)(o.historical.change)," since last month"));case s.RemoteDataTypes.Loading:return i.default.createElement("dd",{className:g.default.statValue},"…")}},O=function(e){var t=e.type,o=e.statRemoteData;return i.default.createElement("div",{className:g.default.stat},i.default.createElement("dt",{className:g.default.statLabel},i.default.createElement(v.default,{type:P(t),className:g.default.statLabelIcon}),i.default.createElement("span",{className:g.default.statLabelText},T(t))),S({statRemoteData:o}))},I=function(e){return i.default.createElement("dl",{key:"stats-body",className:g.default.stats},O({type:r.views,statRemoteData:e.views}),O({type:r.downloads,statRemoteData:e.downloads}),O({type:r.likes,statRemoteData:e.likes}))},C=function(e){return i.default.createElement("div",{key:"stats-failure",className:g.default.container},i.default.createElement("div",{className:g.default.cell},i.default.createElement("p",{className:g.default.p},"Sorry, there was an error loading stats. Please try again later.")))},E=function(e){var t=e.maybeCachedPhotoStats,o=e.photoStatsRemoteData;return void 0!==t?I({views:new s.Success(t.views),downloads:new s.Success(t.downloads),likes:new s.Success(t.likes)}):function(){switch(o.type){case s.RemoteDataTypes.NotAsked:return;case s.RemoteDataTypes.Failure:return C(o.value);case s.RemoteDataTypes.Success:var e=o.value;return I({views:new s.Success(e.views),downloads:new s.Success(e.downloads),likes:new s.Success(e.likes)});case s.RemoteDataTypes.Loading:return I({views:new s.Loading,downloads:new s.Loading,likes:new s.Loading})}}()},k=function(e){var t=e.photo,o=(0,_.getMetadata)({photo:t});return i.default.createElement("dl",{key:"metadata-body",className:g.default.metadata},o.map(function(e){var t=e.name,o=e.value;return i.default.createElement("div",{key:t,className:g.default.metadataItem},i.default.createElement("dt",{className:g.default.metadataItemName},t),i.default.createElement("dd",{className:g.default.metadataItemValue},o))}))},M=function(e){return i.default.createElement("div",{key:"metadata-failure",className:g.default.container},i.default.createElement("div",{className:g.default.cell},i.default.createElement("p",{className:g.default.p},"Sorry, there was an error loading metadata. Please try again later.")))},R=function(e){var t=e.cachedPhoto,o=e.photoFullInfoRemoteData;return(0,l.checkPhotoEntityHasFullInfo)(t)?k({photo:t}):function(){switch(o.type){case s.RemoteDataTypes.Success:return k({photo:o.value});case s.RemoteDataTypes.Loading:return i.default.createElement("div",{key:"loading"},w());case s.RemoteDataTypes.NotAsked:return;case s.RemoteDataTypes.Failure:return M(o.value)}}()},N=function(e){var t=e.auth,o=e.photo,n=function(){return void 0!==t.user&&t.user.username===o.user.username},r=function(){return n()?"/account/photos":t.isAdmin?"/super/photos/"+o.id+"/edit":void 0}(),a=(0,c.mapMaybe)(function(e){return{key:"edit-photo",component:i.default.createElement("a",{href:e},"Edit photo")}},r),u=(0,c.catMaybes)([a]);return u.length>0&&i.default.createElement("div",{key:"other-links",className:g.default.container},u.map(function(e){var t=e.key,o=e.component;return i.default.createElement("div",{key:t,className:g.default.cell},o)}))},D=function(e){var t=e.cachedPhoto,o=e.photoFullInfoRemoteData,n=e.photoStatsRemoteData,r=e.auth,a=(0,d.formatDate)(new Date(t.created_at)),u=(0,l.checkPhotoEntityHasStats)(t)?t.stats:void 0,s=(0,l.checkPhotoEntityHasFullInfo)(t)?(0,c.getOrElseMaybe)(function(){return"Info"},(0,c.normalizeMaybe)(t.story.title)):void 0,f=(0,c.catMaybes)([E({maybeCachedPhotoStats:u,photoStatsRemoteData:n}),R({cachedPhoto:t,photoFullInfoRemoteData:o}),N({photo:t,auth:r})]);return i.default.createElement("div",null,i.default.createElement("div",{className:g.default.container},i.default.createElement("div",{className:g.default.cell},(0,c.mapMaybe)(function(e){return i.default.createElement("h2",{className:g.default.title},e)},s),i.default.createElement("span",{className:g.default.datePublished},"Published on ",i.default.createElement("time",{dateTime:t.created_at},a)))),(0,p.intersperseComponentsArray)(f,function(e){return i.default.createElement("hr",{key:"separator-"+e,className:g.default.hr})}))},A=function(e){var t=e.maybeCachedPhoto,o=e.photoFullInfoRemoteData,n=e.photoStatsRemoteData,r=e.auth;return void 0!==t&&(0,l.checkPhotoEntityHasBasicInfo)(t)?D({cachedPhoto:t,photoStatsRemoteData:n,auth:r,photoFullInfoRemoteData:o}):function(){switch(o.type){case s.RemoteDataTypes.Success:return D({cachedPhoto:o.value,photoStatsRemoteData:n,auth:r,photoFullInfoRemoteData:o});case s.RemoteDataTypes.Loading:return w();case s.RemoteDataTypes.NotAsked:case s.RemoteDataTypes.Failure:return null}}()},j=function(e,t){return{auth:(0,f.getAuth)(e)}};t.default=(0,u.connect)(j)(A)},1897:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMetadata=void 0;var n=o(24),r=function(e){return"ƒ/"+e},a=function(e){return e+"s"},i=function(e){return e+"mm"},u=function(e){return""!==e?e:void 0};t.getMetadata=function(e){var t=e.photo;return[{name:"Camera Make",value:u(t.exif.make)},{name:"Camera Model",value:(0,n.normalizeMaybe)(t.exif.model)},{name:"Focal Length",value:(0,n.mapMaybe)(i,(0,n.normalizeMaybe)(t.exif.focal_length))},{name:"Aperture",value:(0,n.mapMaybe)(r,(0,n.normalizeMaybe)(t.exif.aperture))},{name:"Shutter Speed",value:(0,n.mapMaybe)(a,(0,n.normalizeMaybe)(t.exif.exposure_time))},{name:"ISO",value:(0,n.normalizeMaybe)(t.exif.iso)},{name:"Dimensions",value:t.width+" × "+t.height}].map(function(e){var t=e.name,o=e.value;return{name:t,value:(0,n.getOrElseMaybe)(function(){return"--"},o)}})}},1898:function(e,t){e.exports={colorGrey:"#999",containerPaddingUnit:"18px",cellPaddingUnit:"10px",headerFontSize:"21px",smallFontSize:"12px",container:"_11so1",cell:"_3aBA9",col:"Rs1Ko",title:"_2dIZQ",datePublished:"_1vScU",p:"_5UTXm",stats:"_19Kkj _11so1",stat:"_1H3Tk _3aBA9 Rs1Ko",statLabel:"_2FiKI",statLabelIcon:"_2nkiz",statLabelText:"B5nBa",statValue:"_2zoGD",statValueTotal:"_20G9q",statValueDelta:"_3R4g7",hr:"_1CXhw",metadata:"_1Z2CJ _11so1",metadataItem:"_1XYV- _3aBA9 Rs1Ko",metadataItemName:"_24YMC",metadataItemValue:"_3Dok4"}},1899:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1900);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1900:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),a=n(r),i=o(1680),u=n(i),l=o(1901),s=n(l),c=function(e){var t=e.maybeCachedPhoto,o=e.photoId,n=e.maybeMainImageCurrentSrc,r=e.maybeRawPhotoUrl,i=e.photoFullInfoRemoteData,l=e.modalLocationState;return a.default.createElement(u.default,{photoId:o,modalLocationState:l,maybeMainImageCurrentSrc:n,maybeRawPhotoUrl:r},a.default.createElement(s.default,{maybeCachedPhoto:t,photoFullInfoRemoteData:i}))};t.default=c},1901:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1902);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1902:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),a=n(r),i=o(10),u=n(i),l=o(1573),s=o(1600),c=o(22),d=o(540),f=o(193),p=o(496),h=n(p),m=o(565),y=n(m),v=o(564),_=n(v),b=o(29),g=n(b),P=o(1903),T=n(P),w=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},S=function(){return a.default.createElement("div",{className:T.default.container},a.default.createElement("div",{className:T.default.cell},a.default.createElement(h.default,{padContentBelow:!1})))},O=function(e){var t=e.buttonShareProps,o=e.label,n=e.iconClassName;return a.default.createElement(_.default,w({},t,{className:T.default.shareLink,buttonType:"outline"}),a.default.createElement(g.default,{type:t.type,className:n}),a.default.createElement("span",{className:T.default.shareLinkText},o))},I=function(e){var t=e.photo,o="photos-page-share",n=t.links.html,r=(0,c.trackUrl)(n,{utmSource:"facebook",utmContent:o}),i=(0,c.trackUrl)(n,{utmSource:"twitter",utmContent:o}),l=(0,c.trackUrl)(n,{utmSource:"pinterest",utmContent:o}),s=(0,c.trackUrl)(n,{utmSource:"email",utmContent:o}),p=(0,d.getCreditText)(t.user),h=(0,f.buildImgixUrlWithDefaults)(t.urls.raw)({w:2e3}),m=[{key:"facebook",props:{buttonShareProps:{type:"facebook",url:r},label:"Facebook",iconClassName:T.default.facebookShareLinkIcon}},{key:"pinterest",props:{buttonShareProps:{type:"pinterest",url:l,message:p,media:h},label:"Pinterest",iconClassName:T.default.pinterestShareLinkIcon}},{key:"twitter",props:{buttonShareProps:{type:"twitter",url:i,message:p},label:"Twitter",iconClassName:T.default.twitterShareLinkIcon}},{key:"email",props:{buttonShareProps:{type:"email",url:s},label:"Email",iconClassName:T.default.emailShareLinkIcon}}];return a.default.createElement("div",null,a.default.createElement("div",{className:T.default.container},a.default.createElement("div",{className:T.default.cell},a.default.createElement("h2",{className:T.default.title},"Share"),a.default.createElement("span",{className:T.default.photographer},"Photo by ",t.user.name)),a.default.createElement("div",{className:T.default.halfCell+" "+T.default.shareLinks},m.map(function(e){var t=e.key,o=e.props;return a.default.createElement("div",{key:t,className:(0,u.default)(T.default.halfCell,T.default.shareLinkContainer)},O(o))})),a.default.createElement("div",{className:T.default.cell},a.default.createElement(y.default,{buttonText:"Copy link"},t.links.html))))},C=function(e){var t=e.maybeCachedPhoto,o=e.photoFullInfoRemoteData;return void 0!==t&&(0,l.checkPhotoEntityHasBasicInfo)(t)?I({photo:t}):function(){switch(o.type){case s.RemoteDataTypes.Success:return I({photo:o.value});case s.RemoteDataTypes.Loading:return S();case s.RemoteDataTypes.NotAsked:case s.RemoteDataTypes.Failure:return null}}()};t.default=C},1903:function(e,t){e.exports={spacingUnit:"4px",colorFacebook:"#3b5998",colorTwitter:"#1da1f2",colorPinterest:"#c92228",colorDarkGrey:"#777",containerPaddingUnit:"calc(4px * 4)",cellPaddingUnit:"calc(4px * 2)",cellPaddingUnitHalf:"4px",headerFontSize:"21px",smallFontSize:"12px",container:"_1OFta",cell:"_1EBGx",halfCell:"Jo1xA",title:"_9Hf2J",photographer:"pfcZe",shareLinks:"ZkC2g",shareLinkContainer:"lt4QO",shareLink:"_1szYK",shareLinkIcon:"_2rBQc",facebookShareLinkIcon:"_31Q2i _2rBQc",twitterShareLinkIcon:"_1OESI _2rBQc",pinterestShareLinkIcon:"_2-0Nn _2rBQc",emailShareLinkIcon:"_1hTw9 _2rBQc",shareLinkText:"_1kUwK"}},1904:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TEST_ATTRIBUTE="photos-route"},1905:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1906);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1906:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),a=n(r),i=o(280),u=n(i),l=o(10),s=n(l),c=o(1907),d=n(c),f=o(1916),p=o(188),h=o(1573),m=o(1600),y=o(496),v=n(y),_=o(1918),b=n(_),g=o(1920),P=n(g),T=o(1924),w=n(T),S=o(1932),O=n(S),I=o(1938),C=n(I),E=function(e){var t=e.location,o=e.maybeCachedPhoto,n=e.isModal,r=e.photoFullInfoRemoteData,i=e.maybeMainImageInitialSrc,l=e.relatedPhotoIdsRemoteData,c=e.isMainImageCurrentlyCollapsed,d=e.shouldAllowMainImageCollapsingBehaviour,y=e.onRequestMainImageToggleCollapsed,_=e.onMainImageLoad,g=e.shouldTruncateDescription,T=e.onRequestToggleTruncatedDescription,S=e.isLoggedIn,I=function(e){var o=e.photo,r=(0,f.buildPhotoHeadTags)(o),h=r.title,m=r.meta,v=r.canonicalUrl,I=n?155:200;return a.default.createElement("div",{className:(0,s.default)(C.default.wrapper,d&&C.default.wrapperForMainImageCollapseEnabled)},a.default.createElement(u.default,{title:h,meta:m,link:(0,p.buildLinks)(v)}),a.default.createElement("div",null,a.default.createElement("div",{className:(0,s.default)(n&&C.default.stickyHeaderContainer)},a.default.createElement(b.default,{photo:o,location:t,isLoggedIn:S})),a.default.createElement(P.default,{shouldAllowCollapsingBehaviour:d,isCurrentlyCollapsed:c,onRequestToggleCollapsed:y,maybeInitialSrc:i,photo:o,onImgLoad:_,magicalVerticalOffset:I}),a.default.createElement(w.default,{photo:o,location:t,shouldTruncateDescription:g,onRequestToggleTruncatedDescription:T})),a.default.createElement("div",{className:C.default.container},a.default.createElement(O.default,{photo:o,relatedPhotoIdsRemoteData:l,location:t})))},E=function(){return a.default.createElement("div",{className:C.default.spinnerWrapper},a.default.createElement(v.default,{padContentBelow:!1}))};return void 0!==o&&(0,h.checkPhotoEntityHasBasicInfo)(o)?I({photo:o}):function(){switch(r.type){case m.RemoteDataTypes.Success:return I({photo:r.value});case m.RemoteDataTypes.Loading:return E();case m.RemoteDataTypes.NotAsked:case m.RemoteDataTypes.Failure:return null}}()};E.displayName="Photos",t.default=(0,d.default)(E)},1907:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=o(1908),a=n(r),i=o(1915),u=n(i),l=o(1681),s=(n(l),o(1682)),c=(n(s),function(e){var t=(0,a.default)(function(e,t){return!(0,u.default)(e,t)});return t(e)});t.default=c},1908:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var u=o(1),l=o(1681),s=(n(l),o(1682)),c=(n(s),o(1911)),d=n(c),f=function(e){return function(t){var o=(0,d.default)(t),n=function(t){function n(){return r(this,n),a(this,t.apply(this,arguments))}return i(n,t),n.prototype.shouldComponentUpdate=function(t){return e(this.props,t)},n.prototype.render=function(){return o(this.props)},n}(u.Component);return n}};t.default=f},1909:function(e,t,o){"use strict";t.__esModule=!0;var n=function(e,t){return function(o){return o[e]=t,o}};t.default=n},1910:function(e,t,o){"use strict";t.__esModule=!0;var n=function(e){if("string"==typeof e)return e;if(e)return e.displayName||e.name||"Component"};t.default=n},1911:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=o(1912),a=n(r),i=o(1913),u=n(i),l=function(e){var t=(0,u.default)(e);return function(o,n){return(0,a.default)(!1,t,e,o,n)}};t.default=l},1912:function(e,t,o){"use strict";t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},r=o(1),a=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(e,t,o,r,i){if(!e&&t)return o(i?n({},r,{children:i}):r);var u=o;return i?a.default.createElement(u,r,i):a.default.createElement(u,r)};t.default=i},1913:function(e,t,o){"use strict";t.__esModule=!0;var n=o(1914),r=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(e){return Boolean("function"==typeof e&&!(0,r.default)(e)&&!e.defaultProps&&!e.contextTypes)};t.default=a},1914:function(e,t,o){"use strict";t.__esModule=!0;var n=function(e){return Boolean(e&&e.prototype&&"function"==typeof e.prototype.render)};t.default=n},1915:function(e,t,o){"use strict";t.__esModule=!0;var n=o(202),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=r.default},1916:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=(0,f.default)(e,_.MAXIMUM_TITLE_TAGS_COUNT),o=t.map(function(e){return e.title});return(0,h.default)(o)}function a(e,t){var o=(0,c.default)(t,"story.title"),n="photo by "+e.name+" (@"+e.username+") on Unsplash";if(o)return(0,y.default)(o+" "+n);if(t.tags){var a=r(t.tags);return(0,y.default)(a+" HD "+n)}return"HD "+n}function i(e,t,o){var n=(void 0===o?{}:o).cleanVersion,a=void 0!==n&&n,i=[a?"Download this photo":"Download this free HD photo"];if(t.tags&&!a){var u=r(t.tags);i.push("of",u)}if((0,c.default)(t,"location.city")||(0,c.default)(t,"location.country")){var l=[t.location.city,t.location.country],s=l.filter(function(e){return!!e}).join(", ");i.push("in "+s)}return i.push("by "+e.name+" (@"+e.username+")"),i.join(" ")}function u(e){var t=e.id,o=e.slug;return"https://unsplash.com/photos/"+(o?t+"/"+o:t)}function l(e){var t=e.user,o=a(t,e),n=i(t,e),r=u(e),l=i(t,e,{cleanVersion:!0});return{title:o,description:n,canonicalUrl:r,meta:(0,v.buildPhotoMeta)(t,e,o,n,l,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.buildPhotoHeadTags=l;var s=o(42),c=n(s),d=o(504),f=n(d),p=o(1917),h=n(p),m=o(514),y=n(m),v=o(188),_=o(1588)},1917:function(e,t){/*!
 * array-to-sentence | MIT (c) Shinnosuke Watanabe
 * https://github.com/shinnn/array-to-sentence
*/
e.exports=function(e,t){"use strict";function o(e){if("string"!=typeof t[e])throw new TypeError(String(t[e])+" is not a string. `"+e+"` option must be a string.")}if(!Array.isArray(e))throw new TypeError(String(e)+" is not an array. Expected an array.");return t=t||{},void 0===t.separator?t.separator=", ":o("separator"),void 0===t.lastSeparator?t.lastSeparator=" and ":o("lastSeparator"),0===e.length?"":1===e.length?e[0]:e.slice(0,-1).join(t.separator)+t.lastSeparator+e[e.length-1]}},1918:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1919);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1919:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),a=n(r),i=o(10),u=n(i),l=o(1414),s=n(l),c=o(1423),d=n(c),f=o(1425),p=n(f),h=o(1424),m=n(h),y=o(1683),v=n(y),_=function(e){var t=e.className,o=e.location,n=e.photo,r=e.isLoggedIn,i=r?void 0:"green",l=r?"Download":"Download free";return a.default.createElement("header",{className:(0,u.default)(t,v.default.container)},a.default.createElement("div",{className:v.default.photographer},a.default.createElement(s.default,{includeAvatar:!0,user:n.user,secondaryLink:{label:"@"+n.user.username,href:n.user.links.html},type:"emphasiseUsername"})),a.default.createElement("div",{className:v.default.actions},a.default.createElement("div",{className:v.default.buttonCell},a.default.createElement(d.default,{photo:n,location:o})),a.default.createElement("div",{className:v.default.buttonCell},a.default.createElement(p.default,{photo:n,location:o})),a.default.createElement("div",{className:v.default.downloadButtonCell},a.default.createElement(m.default,{photo:n,showLabel:!0,showTooltip:!1,type:i,label:l,className:v.default.downloadButton}))))};t.default=_},1920:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1921);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1921:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),a=n(r),i=o(77),u=o(10),l=n(u),s=o(24),c=o(1578),d=o(512),f=o(524),p=n(f),h=o(29),m=n(h),y=o(1922),v=o(1923),_=n(v),b=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),g=function(e){function t(t){var o=e.call(this,t)||this;return o.renderOverlay=function(e){var t=e.shouldBecomeCollapsed,o=t?"zoom-in":"zoom-out";return a.default.createElement("div",{className:_.default.overlay},a.default.createElement("div",{className:_.default.overlayChild},a.default.createElement(m.default,{type:o,className:_.default.zoomToggleIcon})))},o.renderImage=function(){var e=o.props,t=e.photo,n=e.isCurrentlyCollapsed,r=e.shouldAllowCollapsingBehaviour,i=e.maybeInitialSrc,u=e.onImgLoad,l=e.magicalVerticalOffset,f=o.state.shouldUseInitialSrcIfAvailable,h=t.urls.raw,m=(0,y.createHelpers)({magicalVerticalOffset:l}),v=m.getImgSizesString,b=m.getImgSrcSetString,g=m.createFallbackSrc,P=r&&n,T=t.width,w=t.height,S={width:T,height:w},O=w/T,I=(0,d.ratioToPercentage)(O),C=v({shouldBecomeCollapsed:P,photoDimensions:S}),E=function(){return b({photoDimensions:S,baseUrl:h})},k=f?(0,s.getOrElseMaybe)(E,(0,s.mapMaybe)(function(e){return(0,c.serializeSrcSet)([{url:e}])},i)):E(),M=g(h);return a.default.createElement(p.default,{containerClassName:_.default.imagePlaceholder,containerStyle:{paddingBottom:I},key:t.id,sizes:C,srcSet:k,onLoad:u,src:M,alt:t.description})},o.state=o.getInitialState(),o}return b(t,e),t.prototype.getInitialState=function(){return{shouldUseInitialSrcIfAvailable:!0}},t.prototype.componentDidMount=function(){this.disableInitialSrc()},t.prototype.componentWillReceiveProps=function(e){var t=this.props.photo;e.photo.id!==t.id&&this.setState(this.getInitialState)},t.prototype.componentDidUpdate=function(){var e=this;this.state.shouldUseInitialSrcIfAvailable&&requestAnimationFrame(function(){requestAnimationFrame(function(){e.state.shouldUseInitialSrcIfAvailable&&e.disableInitialSrc()})})},t.prototype.disableInitialSrc=function(){this.setState({shouldUseInitialSrcIfAvailable:!1})},t.prototype.render=function(){var e=this,t=this.props,o=t.photo,n=t.onRequestToggleCollapsed,r=t.isCurrentlyCollapsed,u=t.shouldAllowCollapsingBehaviour,s=t.magicalVerticalOffset,c=(0,y.createHelpers)({magicalVerticalOffset:s}),d=c.getMinAndMaxWidthsLengths,f=c.getPaddingConstants,p=u&&r,h=f(),m=h.HORIZONTAL_PADDING_LENGTH,v=h.VERTICAL_PADDING_LENGTH,b=o.width,g=o.height,P={width:b,height:g},T=d({photoDimensions:P}),w=T.minWidthLength,S=T.maxWidthLength,O=(0,l.default)(_.default.imageButton,function(){return u?r?_.default.imageButtonCollapsed:_.default.imageButtonExpanded:void 0}()),I=u?i.Option.some(n):i.Option.none();return a.default.createElement("div",{style:p?{padding:v+" "+m}:{}},a.default.createElement("div",{className:_.default.imageContainer,style:p?{minWidth:w,maxWidth:S}:{}},I.map(function(t){return a.default.createElement("button",{className:O,onClick:t},e.renderOverlay({shouldBecomeCollapsed:p}),e.renderImage())}).getOrElseL(this.renderImage)))},t}(r.PureComponent);t.default=g},1922:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createHelpers=void 0;var n=o(100),r=function(e){return e&&e.__esModule?e:{default:e}}(n),a=o(20),i=o(533),u=o(24),l=o(1578),s=o(512),c=o(1683),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(c),f=function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var n,r,a=o.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return i},p=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e};t.createHelpers=function(e){var t=e.magicalVerticalOffset,o=function(){var e=(0,s.numberToPixels)(10),o=20+t,n=(0,s.pixelsToNumber)(d.outerHorizontalGutter);return{TOTAL_HORIZONTAL_PADDING:2*n,TOTAL_VERTICAL_PADDING:o,HORIZONTAL_PADDING_LENGTH:(0,s.numberToPixels)(n),VERTICAL_PADDING_LENGTH:e}},n=o(),c=n.TOTAL_HORIZONTAL_PADDING,f=n.TOTAL_VERTICAL_PADDING,h=function(){var e=o(),t=e.TOTAL_HORIZONTAL_PADDING,n=e.TOTAL_VERTICAL_PADDING;return{IMAGE_WIDTH_CONSTRAINED_TO_VIEWPORT_WIDTH_LENGTH:(0,s.createCssCalc)("100vw - "+(0,s.numberToPixels)(t)),IMAGE_HEIGHT_CONSTRAINED_TO_VIEWPORT_HEIGHT_LENGTH:(0,s.createCssCalc)("100vh - "+(0,s.numberToPixels)(n))}}(),m=h.IMAGE_WIDTH_CONSTRAINED_TO_VIEWPORT_WIDTH_LENGTH,y=h.IMAGE_HEIGHT_CONSTRAINED_TO_VIEWPORT_HEIGHT_LENGTH,v=function(e){return e.map(function(e){return(0,u.catMaybes)([e.mediaCondition,e.width]).join(" ")}).join(", ")},_=function(e){var t=e.photoDimensions,o=t.width,n=t.height,r=o/n,a=function(e){return Math.ceil(e*r)};return{lowerBound:a(500),upperBound:a(n)}},b=function(e){var t=e.photoDimensions,o=e.baseUrl,n=_({photoDimensions:t}),r=n.lowerBound,a=n.upperBound;return(0,l.generateImgWidthSrcSetString)({baseUrl:o,lowerBound:r,upperBound:a,interval:300})},g=function(e){var t=e.photoDimensions;if((0,i.isSquareOrPortraitPhoto)(t)){var o=t.width,n=t.height,r=o/n;return function(e){return Math.ceil(e*r)}(500)}return 500},P=function(e){var t=e.photoDimensions,o=t.width,n=t.height,r=o/n,a=g({photoDimensions:t});return{minWidthLength:(0,s.numberToPixels)(a),maxWidthLength:function(e){return(0,s.createCssCalc)("("+e+") * "+r)}(y)}},T=function(e){var t=e.photoDimensions,o=t.width,n=t.height,r=n/o,a=g({photoDimensions:t}),i=function(e){return Math.ceil(e*r)}(a);return{isMinSizeMediaConditions:["(max-width: "+(0,s.numberToPixels)(a+c)+")","(max-height: "+(0,s.numberToPixels)(i+f)+")"],isConstrainedByViewportHeightMediaCondition:"(min-aspect-ratio: "+o+"/"+n+")"}},w=function(e){var t=e.photoDimensions;if(e.shouldBecomeCollapsed){var o=P({photoDimensions:t}),n=o.minWidthLength,r=o.maxWidthLength,a=T({photoDimensions:t}),i=a.isMinSizeMediaConditions,u=a.isConstrainedByViewportHeightMediaCondition;return p(i.map(function(e){return{mediaCondition:e,width:n}}),[{mediaCondition:u,width:r},{width:m}])}return[{width:"100vw"}]},S=(0,r.default)(w,v);return{getPaddingConstants:o,getImgSrcSetString:b,getMinAndMaxWidthsLengths:P,getImgSizesString:S,createFallbackSrc:function(e){return(0,a.buildImgixUrlDEPRECATED)({url:e,width:String(1e3),q:"80"})}}}},1923:function(e,t){e.exports={resetBtn:"DWLeW",spacingUnit:"4px",center:"_3vQsl",imagePlaceholder:"_2yFK-",imageContainer:"_1ac-D _3vQsl",imageButton:"_1szcv DWLeW",overlay:"_2MKkb",imageButtonExpanded:"_2bRfu",imageButtonCollapsed:"_1epAc",overlayChild:"_1w7cG",zoomToggleIcon:"_1NYtf"}},1924:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1925);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1925:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),a=n(r),i=o(145),u=o(1573),l=o(24),s=o(41),c=o(540),d=o(29),f=n(d),p=o(1926),h=n(p),m=o(534),y=o(1929),v=n(y),_=o(1930),b=n(_),g=function(e){var t=e.photo,o=e.location,n=e.shouldTruncateDescription,r=e.onRequestToggleTruncatedDescription,d={pathname:(0,m.getPhotoInfoRoute)({photoId:t.id}),state:o.state},p={pathname:(0,m.getPhotoShareRoute)({photoId:t.id}),state:o.state},y=(0,u.checkPhotoEntityHasFullInfo)(t)?(0,l.normalizeMaybe)(t.story.description):void 0,_=(0,u.checkPhotoEntityHasFullInfo)(t)?(0,l.mapMaybe)(function(e){return(0,l.normalizeMaybe)(e.title)},t.location):void 0,g=(0,c.getCreditText)(t.user),P={url:t.links.html,title:t.description,text:g};return a.default.createElement("div",{className:v.default.container},a.default.createElement("div",{className:v.default.textContainer},(0,l.mapMaybe)(function(e){return a.default.createElement(i.Link,{to:(0,s.buildSearchUrl)(e),className:v.default.locationLink},a.default.createElement(f.default,{type:"location",className:v.default.locationIcon}),a.default.createElement("span",{className:v.default.locationTitle},e))},_),(0,l.mapMaybe)(function(e){return a.default.createElement("div",{className:v.default.descriptionContainer},a.default.createElement(h.default,{text:e,containerClassName:v.default.descriptionNotTruncated,truncatedContainerClassName:v.default.descriptionTruncated,shouldTruncate:n,shouldShowTruncateButton:!1,onRequestToggle:r}))},y)),a.default.createElement(b.default,{shareLocationDescriptor:p,shareOptions:P,buttonProps:{className:v.default.shareButton},linkProps:{className:v.default.shareLink}},a.default.createElement(f.default,{className:v.default.linkIcon,type:"share"}),a.default.createElement("span",{className:v.default.linkText},"Share")),a.default.createElement(i.Link,{className:v.default.action,to:d},a.default.createElement(f.default,{className:v.default.linkIconWithPadding,type:"info"}),a.default.createElement("span",{className:v.default.linkText},"Info")))};g.displayName="Footer",t.default=g},1926:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1927);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1927:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),a=n(r),i=o(10),u=n(i),l=o(24),s=o(1928),c=n(s),d=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),f=function(e){return e.offsetWidth<e.scrollWidth},p=function(e){function t(t){var o=e.call(this,t)||this;return o.state=o.getInitialState(),o}return d(t,e),t.prototype.getInitialState=function(){return{doesRequireTruncation:!0}},t.prototype.componentDidMount=function(){this.updateRequiresTruncation()},t.prototype.componentDidUpdate=function(e){e.text!==this.props.text&&this.updateRequiresTruncation()},t.prototype.updateRequiresTruncation=function(){if(this.props.shouldTruncate&&(0,l.isNotUndefinedOrNull)(this.textElRef)){var e=f(this.textElRef),t=e;this.setState({doesRequireTruncation:t})}},t.prototype.render=function(){var e=this,t=this.props,o=t.text,n=t.truncatedContainerClassName,r=t.containerClassName,i=t.shouldTruncate,l=t.shouldShowTruncateButton,s=t.onRequestToggle,d=this.state.doesRequireTruncation,f=d&&(!!i||l);return a.default.createElement("div",{className:(0,u.default)(c.default.container,i?[c.default.containerTruncated,n]:r)},a.default.createElement("p",{ref:function(t){e.textElRef=t},className:(0,u.default)(c.default.text,d&&i?c.default.textTruncated:c.default.textNotTruncated)},o)," ",f&&a.default.createElement("button",{className:c.default.toggleButton,onClick:s},i?"Read more":"Show less"))},t.displayName="TruncatedTextToggle",t}(r.PureComponent);t.default=p},1928:function(e,t){e.exports={colorLightBlack:"#111",colorGrey:"#999",truncate:"_1ByhS",resetBtn:"DWLeW",containerTruncated:"_3PLD4",text:"KNDj7",textNotTruncated:"_2FfeD",textTruncated:"b5rtm _1ByhS",toggleButton:"_19oEl DWLeW",expandButton:"_2mJKr"}},1929:function(e,t){e.exports={spacingUnit:"4px",resetBtn:"DWLeW",colorGrey:"#999",colorLightBlack:"#111",truncate:"_1ByhS",fontWeightMedium:"xLon9",smallFontSize:"12px",link:"_1dUIs",container:"_1ltEq",halfCell:"_3kEvh",textContainer:"_2DxLe _3kEvh",textContainerNotTruncated:"gfzKD",textContainerTruncated:"OD7Kw",locationLink:"_2RL3a xLon9",locationIcon:"_15of1 _3kEvh",locationTitle:"_20NLS _1ByhS",descriptionContainer:"_10Trd _3kEvh",descriptionNotTruncated:"Tly8r",descriptionTruncated:"_2UE6C",action:"_2wtkH _3kEvh xLon9",linkIcon:"zW0jE",linkIconWithPadding:"H7PLe zW0jE _3kEvh",linkText:"_1S-Rs _3kEvh",shareLinkOrButton:"P_Gsg _2wtkH _3kEvh xLon9",shareLink:"_20YfC P_Gsg _2wtkH _3kEvh xLon9",shareButton:"_1giCj DWLeW P_Gsg _2wtkH _3kEvh xLon9 _1dUIs"}},1930:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1931);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1931:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(1),r=function(e){return e&&e.__esModule?e:{default:e}}(n),a=o(145),i=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),u=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},l=function(e){function t(){var t=e.call(this)||this;return t.openWebShare=function(){var e=t.props.shareOptions;void 0!==window.navigator.share?window.navigator.share(e):console.warn("Web Share API not found.")},t.state=t.getInitialState(),t}return i(t,e),t.prototype.getInitialState=function(){return{hasWebShareApi:void 0!==window.navigator.share}},t.prototype.render=function(){var e=this.props,t=e.shareLocationDescriptor,o=e.children,n=e.buttonProps,i=e.linkProps;return this.state.hasWebShareApi?r.default.createElement("button",u({onClick:this.openWebShare},n),o):r.default.createElement(a.Link,u({to:t},i),o)},t}(n.PureComponent);t.default=l},1932:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1933);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1933:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),a=n(r),i=o(24),u=o(1573),l=o(1612),s=n(l),c=o(1934),d=n(c),f=o(1936),p=n(f),h=function(e){var t=e.photo,o=e.location,n=e.relatedPhotoIdsRemoteData,r=(0,u.checkPhotoEntityHasFullInfo)(t)?t.related_collections:void 0,l=(0,u.checkPhotoEntityHasFullInfo)(t)?t.tags:void 0;return a.default.createElement("div",null,a.default.createElement(d.default,{photoIdsRemoteData:n,location:o}),(0,i.mapMaybe)(function(e){return a.default.createElement(p.default,{relatedCollections:e})},r),a.default.createElement(s.default,{headingCopy:"Related tags",keywords:l,showHeading:!0}))};t.default=h},1934:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1935);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1935:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),a=n(r),i=o(1600),u=o(1628),l=o(1457),s=n(l),c=o(496),d=n(c),f=o(1684),p=n(f),h=(0,u.mapPhotoIdsToPhotos)(s.default),m=function(e){var t=e.photoIdsRemoteData,o=e.location,n=function(e){var t=e.bodyPhotoIdsRemoteData;switch(t.type){case i.RemoteDataTypes.Success:return a.default.createElement(h,{photoIds:t.value,location:o,shouldUseContainerPadding:!1});case i.RemoteDataTypes.Loading:return a.default.createElement(d.default,{padContentBelow:!1})}},r=function(e){var t=e.bodyPhotoIdsRemoteData;return a.default.createElement("div",null,a.default.createElement("h2",{className:p.default.heading},"Related photos"),n({bodyPhotoIdsRemoteData:t}))};switch(t.type){case i.RemoteDataTypes.Loading:return r({bodyPhotoIdsRemoteData:t});case i.RemoteDataTypes.Success:return 0===t.value.length?null:r({bodyPhotoIdsRemoteData:t});case i.RemoteDataTypes.Failure:case i.RemoteDataTypes.NotAsked:return null}};t.default=m},1936:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1937);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1937:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),a=n(r),i=o(1566),u=n(i),l=o(1573),s=o(1684),c=n(s),d=function(e){var t=e.relatedCollections,o=t.type===l.RelatedCollectionsType.related?"Related collections":"Featured in "+t.total+" collections";return 0===t.results.length?null:a.default.createElement("div",null,a.default.createElement("p",{className:c.default.heading},o),a.default.createElement("div",null,t.results.map(function(e,t){return a.default.createElement(u.default,{key:t,collection:e,columns:3})})))};d.displayName="RelatedCollections",t.default=d},1938:function(e,t){e.exports={container:"_1OYbO _2sCnE PrOBO _1CR66",wrapper:"WMwuA",stickyHeaderContainer:"_33qjA",spinnerWrapper:"xn9xU"}}});
//# sourceMappingURL=photos-route.main.5e111.js.map